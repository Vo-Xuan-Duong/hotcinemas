<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <title>Vé Phim PDF</title>

    <style>
        @page {
            size: 210mm 100mm;
            margin: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background: #ffffff;
        }

        /* ================= MAIN CONTAINER ================= */
        .ticket-container {
            width: 100%;
            display: table;
            table-layout: fixed;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            background: #fff;
            overflow: hidden;
        }

        /* ================= LEFT COLUMN ================= */
        .ticket-left {
            display: table-cell;
            width: 65%;
            padding: 25px 30px;
            border-right: 2px dashed #d1d5db;
            position: relative;
            vertical-align: top;
        }

        /* Notches (đường cắt vé) */
        .notch {
            position: absolute;
            right: -10px;
            width: 20px;
            height: 20px;
            background: #fff;
            border-radius: 50%;
            border: 1px solid #ddd;
            z-index: 10;
        }

        .notch-top { top: -10px; }
        .notch-bottom { bottom: -10px; }

        /* Poster + Info */
        .poster-img {
            width: 90px;
            height: 135px;
            border-radius: 6px;
            background: #eee;
            border: 1px solid #ccc;
            float: left;
            margin-right: 18px;
        }

        .movie-info {
            overflow: hidden;
        }

        .movie-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #111;
            line-height: 1.2;
        }

        .movie-format {
            font-size: 13px;
            padding: 3px 6px;
            border-radius: 4px;
            background: #f3f4f6;
            color: #6b7280;
            display: inline-block;
        }

        /* Details grid */
        .details-grid {
            clear: both;
            margin-top: 25px;
        }

        .detail-item {
            width: 50%;
            float: left;
            margin-bottom: 20px;
        }

        .detail-label {
            font-size: 11px;
            text-transform: uppercase;
            color: #9ca3af;
            margin-bottom: 4px;
            font-weight: 700;
        }

        .detail-value {
            font-size: 16px;
            color: #1f2937;
            font-weight: 600;
        }

        /* Footer giá */
        .ticket-footer {
            clear: both;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
        }

        .price-label {
            float: left;
            font-size: 14px;
            color: #6b7280;
        }

        .price-value {
            float: right;
            font-size: 26px;
            font-weight: 900;
            color: #1347ae;
        }

        /* ================= RIGHT COLUMN (QR) ================= */
        .ticket-right {
            width: 35%;
            display: table-cell;
            padding: 30px;
            background: #f9fafb;
            vertical-align: middle;
            text-align: center;
        }

        .qr-frame {
            width: 200px;
            margin: 0 auto 15px auto;
            padding: 10px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .qr-img {
            width: 180px;
            height: 180px;
        }

        .success-msg {
            color: #16a34a;
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 8px;
        }

        .booking-label {
            font-size: 12px;
            color: #6b7280;
        }

        .booking-code {
            font-family: 'Courier New', monospace;
            font-size: 18px;
            font-weight: bold;
            letter-spacing: 1px;
            margin-top: 4px;
        }

        .note-text {
            margin-top: 8px;
            font-size: 10px;
            color: #9ca3af;
            line-height: 1.3;
        }
    </style>
</head>

<body>

<div class="ticket-container">

    <!-- LEFT -->
    <div class="ticket-left">
        <div class="notch notch-top"></div>
        <div class="notch notch-bottom"></div>

        <img class="poster-img" th:src="${booking.moviePosterUrl}" alt="Poster" />

        <div class="movie-info">
            <div class="movie-title" th:text="${booking.movieName}">
                Movie Name
            </div>
            <span class="movie-format" th:text="${booking.movieFormat}">2D Sub</span>
        </div>

        <div class="details-grid">
            <div class="detail-item">
                <div class="detail-label">Rạp chiếu</div>
                <div class="detail-value" th:text="${booking.cinemaName}">CGV Vincom</div>
            </div>

            <div class="detail-item">
                <div class="detail-label">Phòng chiếu</div>
                <div class="detail-value" th:text="${booking.roomName}">Room 5</div>
            </div>

            <div class="detail-item">
                <div class="detail-label">Ngày giờ</div>
                <div class="detail-value" th:text="${booking.showTime}">19:30 - 26/10/2024</div>
            </div>

            <div class="detail-item">
                <div class="detail-label">Ghế</div>
                <div class="detail-value" th:text="${booking.seatList}">G7, G8</div>
            </div>
        </div>

        <div class="ticket-footer">
            <span class="price-label">Tổng thanh toán</span>
            <span class="price-value" th:text="${booking.totalPrice}">360.000đ</span>
        </div>
    </div>

    <!-- RIGHT -->
    <div class="ticket-right">
        <div class="qr-frame">
            <img class="qr-img" th:src="'data:image/png;base64,' + ${booking.qrCodeBase64}" />
        </div>

        <div class="success-msg">✓ Thành công!</div>

        <div class="booking-label">Mã Booking</div>
        <div class="booking-code" th:text="${booking.bookingCode}">BK123456</div>

        <div class="note-text">
            Quét mã QR tại quầy soát vé để vào rạp.
        </div>
    </div>

</div>

</body>
</html>
