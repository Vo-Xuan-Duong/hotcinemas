import{a as J,r as d,j as e,a7 as w,T as ee,S as u,t as D,C as f,f as y,B as te,d as b,e as o,$ as E,E as R,_ as se,p as j,Z as ae,D as ie,M as re,a6 as le}from"./index-bcuI966E.js";import{d as v}from"./dayjs.min-B6KFzVi6.js";import{s as C}from"./vi-hz5DUYX_.js";import{R as A}from"./ClockCircleOutlined-Cahcm4Ws.js";import"./ClockCircleOutlined-CELcQ7Uv.js";const{Title:p,Text:h}=ee;v.locale("vi");const ye=()=>{J();const[k,K]=d.useState(!0),[x,N]=d.useState(v()),[ne,ce]=d.useState("Tp. Hồ Chí Minh"),[M,V]=d.useState("Beta Ung Văn Khiêm"),[l,S]=d.useState(null),I=[{id:1,title:"Thanh Gươm Diệt Quỷ: Vô Hạn Thành",originalTitle:"Demon Slayer - Kimetsu no Yaiba - The Movie: Infinity Castle",poster:"https://picsum.photos/150/220?random=1",duration:"T16",age:"2h35",genre:"Action, Thriller, Animation, Fantasy",format:"2D Phụ Đề Việt",showtimes:[{time:"00:20",type:"80K",available:!0},{time:"00:40",type:"80K",available:!0},{time:"08:15",type:"90K",available:!0},{time:"09:00",type:"90K",available:!0},{time:"09:30",type:"90K",available:!0},{time:"10:10",type:"90K",available:!0},{time:"11:00",type:"90K",available:!0},{time:"11:40",type:"80K",available:!0},{time:"12:20",type:"80K",available:!0},{time:"13:00",type:"80K",available:!0},{time:"13:50",type:"80K",available:!0},{time:"14:30",type:"90K",available:!0},{time:"15:10",type:"90K",available:!0},{time:"15:50",type:"90K",available:!0},{time:"16:40",type:"80K",available:!0},{time:"17:20",type:"80K",available:!0},{time:"18:00",type:"80K",available:!0},{time:"18:20",type:"90K",available:!0},{time:"18:40",type:"100K",available:!0},{time:"19:00",type:"80K",available:!0},{time:"19:30",type:"80K",available:!0},{time:"20:10",type:"80K",available:!0},{time:"20:50",type:"80K",available:!0},{time:"21:10",type:"80K",available:!0},{time:"21:30",type:"90K",available:!0},{time:"21:50",type:"90K",available:!0},{time:"22:20",type:"80K",available:!0},{time:"23:00",type:"80K",available:!0},{time:"23:40",type:"80K",available:!0}]},{id:2,title:"Phim Shin Cậu Bé Bút Chì: Nóng Bỏng Tay! Những Vũ Công Kasukabe",originalTitle:"Crayon Shin-chan the Movie: Super Hot! The Spicy Kasukabe Dancers",poster:"https://picsum.photos/150/220?random=2",duration:"P",age:"1h43",genre:"Animation",format:"2D Lồng Tiếng",showtimes:[{time:"08:30",type:"70K",available:!0},{time:"10:15",type:"70K",available:!0},{time:"14:20",type:"70K",available:!0},{time:"16:00",type:"70K",available:!0},{time:"17:45",type:"70K",available:!0},{time:"19:30",type:"70K",available:!0}]}],B=()=>{const t=[];for(let a=0;a<7;a++){const s=v().add(a,"day");t.push({date:s.format("DD/M"),day:s.format("ddd").toUpperCase(),dayNumber:s.format("DD"),month:s.format("MM"),fullDate:s,isToday:a===0})}return t},[de]=d.useState(B());d.useEffect(()=>{setTimeout(()=>{K(!1)},1e3)},[]);const L=(t,a)=>{C.success({message:"Đặt vé thành công",description:`Đã đặt vé phim "${t.title}" suất ${a.time}`})};if(k)return e.jsx("div",{className:"schedule-modern",children:e.jsxs("div",{style:{textAlign:"center",padding:"100px 0"},children:[e.jsx(w,{size:"large"}),e.jsx(p,{level:4,style:{marginTop:16,color:"var(--text-primary)"},children:"Đang tải lịch chiếu..."})]})});const T=[{id:1,name:"HotCinemas Vincom",rooms:[{id:1,name:"Phòng 1",type:"Standard"},{id:2,name:"Phòng 2",type:"VIP"},{id:3,name:"Phòng 3",type:"IMAX"}]},{id:2,name:"HotCinemas Landmark",rooms:[{id:4,name:"Phòng 1",type:"Standard"},{id:5,name:"Phòng 2",type:"VIP"},{id:6,name:"Phòng 3",type:"4DX"}]},{id:3,name:"HotCinemas Crescent Mall",rooms:[{id:7,name:"Phòng 1",type:"Standard"},{id:8,name:"Phòng 2",type:"VIP"}]}],$=(()=>{const t=[];let a=1;for(let s=0;s<7;s++){const i=v().add(s,"day").format("YYYY-MM-DD");I.forEach(r=>{T.forEach(c=>{const n=Math.floor(Math.random()*3)+3,m=[9,12,15,18,21];for(let g=0;g<n;g++){const W=m[g]||22+Math.floor(Math.random()*2),_=Math.floor(Math.random()*4)*15,Q=`${W.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`,Z=c.rooms[Math.floor(Math.random()*c.rooms.length)];t.push({id:a++,movieId:r.id,cinemaId:c.id,roomId:Z.id,date:i,time:Q})}})})}return t})(),z=()=>{const t=[];for(let a=0;a<14;a++){const s=v().add(a,"day");t.push({value:s,label:s.format("ddd, DD/MM"),fullLabel:s.format("dddd, DD MMMM YYYY"),isToday:a===0,isWeekend:s.day()===0||s.day()===6})}return t},[O]=d.useState(z()),X=()=>[...new Set(movies.map(a=>a.genre).filter(Boolean))];d.useEffect(()=>{P()},[]),d.useEffect(()=>{G()},[schedules,x,M,selectedGenre]);const P=async()=>{try{K(!0),await new Promise(t=>setTimeout(t,1e3)),setSchedules($),setMovies(I),setCinemas(T)}catch(t){console.error("Error fetching data:",t),C.error({message:"Lỗi tải dữ liệu",description:"Không thể tải thông tin lịch chiếu. Vui lòng thử lại."})}finally{K(!1)}},G=()=>{const a=schedules.filter(s=>{const i=!x||s.date===x.format("YYYY-MM-DD"),r=!M||s.cinemaId===parseInt(M);let c=!0;return selectedGenre&&(c=movies.find(m=>m.id===s.movieId)?.genre===selectedGenre),i&&r&&c}).reduce((s,i)=>{const r=i.movieId;if(!s[r]){const m=movies.find(g=>g.id===r);s[r]={movie:m,showtimes:[]}}const c=cinemas.find(m=>m.id===i.cinemaId),n=c?.rooms?.find(m=>m.id===i.roomId);return s[r].showtimes.push({...i,cinema:c,room:n}),s},{});Object.values(a).forEach(s=>{s.showtimes.sort((i,r)=>i.time.localeCompare(r.time)),s.showtimes.forEach(i=>{const r=parseInt(i.time.split(":")[0]),c=x.day()===0||x.day()===6;let n=8e4;r>=18&&(n+=2e4),r>=22&&(n+=3e4),c&&(n+=15e3),i.room?.type==="VIP"&&(n+=5e4),i.room?.type==="IMAX"&&(n+=7e4),i.room?.type==="4DX"&&(n+=1e5),i.price=n})}),setFilteredSchedules(Object.values(a).filter(s=>s.movie))},H=t=>{const a=new Set(likedMovies);a.has(t)?(a.delete(t),C.info({message:"Đã bỏ yêu thích",description:"Phim đã được xóa khỏi danh sách yêu thích."})):(a.add(t),C.success({message:"Đã thêm yêu thích",description:"Phim đã được thêm vào danh sách yêu thích."})),setLikedMovies(a)},Y=t=>{S(t)},F=t=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t),q=t=>{switch(t){case"VIP":return e.jsx(CrownOutlined,{});case"IMAX":return e.jsx(ThunderboltOutlined,{});case"4DX":return e.jsx(le,{});default:return e.jsx(UserOutlined,{})}},U=t=>{switch(t){case"VIP":return"gold";case"IMAX":return"purple";case"4DX":return"red";default:return"blue"}};return k?e.jsx("div",{className:"schedule-modern",children:e.jsxs("div",{style:{textAlign:"center",padding:"100px 0"},children:[e.jsx(w,{size:"large"}),e.jsx(p,{level:4,style:{marginTop:16,color:"var(--text-primary)"},children:"Đang tải lịch chiếu..."})]})}):e.jsx("div",{className:"schedule-modern",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"schedule-header",children:e.jsx(u,{direction:"vertical",size:"large",style:{width:"100%",textAlign:"center"},children:e.jsxs("div",{children:[e.jsx(Avatar,{size:64,icon:e.jsx(D,{}),style:{backgroundColor:"#ff6b35"}}),e.jsx(p,{level:1,style:{color:"var(--text-primary)",marginTop:16,marginBottom:8},children:"Lịch Chiếu Phim"}),e.jsx(h,{style:{color:"var(--text-secondary)",fontSize:"16px"},children:"Khám phá và đặt vé cho những bộ phim hay nhất"})]})})}),e.jsxs(f,{className:"quick-dates-card",bodyStyle:{padding:"16px"},children:[e.jsxs(p,{level:5,style:{marginBottom:16,color:"var(--text-primary)"},children:[e.jsx(D,{})," Chọn nhanh ngày chiếu"]}),e.jsx("div",{className:"quick-dates",children:O.slice(0,7).map(t=>e.jsx(y,{type:x.isSame(t.value,"day")?"primary":"default",className:`date-btn ${t.isToday?"today":""} ${t.isWeekend?"weekend":""}`,onClick:()=>N(t.value),children:e.jsxs("div",{children:[e.jsx("div",{className:"date-label",children:t.label}),t.isToday&&e.jsx(te,{count:"Hôm nay",style:{backgroundColor:"#52c41a"}})]})},t.value.format("YYYY-MM-DD")))})]}),e.jsx(f,{className:"filters-card",bodyStyle:{padding:"20px"},children:e.jsxs(b,{gutter:[16,16],align:"middle",children:[e.jsx(o,{xs:24,sm:8,md:6,children:e.jsxs(u,{children:[e.jsx(FilterOutlined,{}),e.jsx(h,{strong:!0,style:{color:"var(--text-primary)"},children:"Bộ lọc:"})]})}),e.jsx(o,{xs:24,sm:16,md:6,children:e.jsx(DatePicker,{value:x,onChange:t=>N(t),placeholder:"Chọn ngày chiếu",style:{width:"100%"},format:"DD/MM/YYYY",disabledDate:t=>t&&t<v().startOf("day")})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(Select,{placeholder:"Chọn rạp chiếu",value:M,onChange:V,style:{width:"100%"},allowClear:!0,children:cinemas.map(t=>e.jsxs(Option,{value:t.id,children:[e.jsx(E,{})," ",t.name]},t.id))})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(Select,{placeholder:"Chọn thể loại",value:selectedGenre,onChange:setSelectedGenre,style:{width:"100%"},allowClear:!0,children:X().map(t=>e.jsx(Option,{value:t,children:t},t))})})]})}),e.jsx("div",{className:"selected-date-display",children:e.jsxs(p,{level:3,style:{color:"var(--text-primary)",textAlign:"center"},children:[e.jsx(D,{})," Lịch chiếu ngày: ",x.format("dddd, DD MMMM YYYY")]})}),e.jsx("div",{className:"schedules-container",children:filteredSchedules.length===0?e.jsx(f,{children:e.jsx(R,{image:R.PRESENTED_IMAGE_SIMPLE,description:e.jsxs("div",{children:[e.jsx(p,{level:4,children:"Không có lịch chiếu"}),e.jsx(h,{children:"Không tìm thấy suất chiếu nào cho ngày và bộ lọc đã chọn."})]}),children:e.jsx(y,{type:"primary",icon:e.jsx(ReloadOutlined,{}),onClick:P,children:"Tải lại"})})}):e.jsx(b,{gutter:[24,24],children:filteredSchedules.map(({movie:t,showtimes:a})=>e.jsx(o,{xs:24,children:e.jsx(f,{className:"movie-schedule-card",hoverable:!0,children:e.jsxs(b,{gutter:[24,16],children:[e.jsx(o,{xs:24,md:8,children:e.jsxs("div",{className:"movie-info-section",children:[e.jsxs("div",{className:"movie-poster-container",children:[e.jsx("img",{src:t.poster||`https://picsum.photos/300/450?random=${t.id}`,alt:t.title,className:"movie-poster",onClick:()=>Y(t)}),e.jsx("div",{className:"movie-overlay",children:e.jsx(y,{shape:"circle",icon:e.jsx(se,{}),size:"large",onClick:()=>Y(t)})})]}),e.jsxs("div",{className:"movie-details",children:[e.jsx(p,{level:4,style:{marginBottom:8},children:t.title}),e.jsxs(u,{direction:"vertical",size:"small",children:[e.jsxs(u,{children:[e.jsx(Rate,{disabled:!0,defaultValue:t.rating/2}),e.jsxs(h,{strong:!0,children:[t.rating,"/10"]})]}),e.jsxs(u,{wrap:!0,children:[e.jsx(j,{color:"blue",children:t.genre}),e.jsxs(j,{color:"orange",children:[t.duration," phút"]}),e.jsx(j,{color:"red",children:t.ageLabel})]}),e.jsxs("div",{className:"movie-actions",children:[e.jsx(y,{type:"text",icon:e.jsx(ae,{}),className:likedMovies.has(t.id)?"liked":"",onClick:()=>H(t.id),children:"Yêu thích"}),e.jsx(y,{type:"text",icon:e.jsx(ShareAltOutlined,{}),children:"Chia sẻ"})]})]})]})]})}),e.jsx(o,{xs:24,md:16,children:e.jsxs("div",{className:"showtimes-section",children:[e.jsxs(p,{level:5,style:{marginBottom:16},children:[e.jsx(A,{})," Suất chiếu (",a.length," suất)"]}),e.jsx(b,{gutter:[12,12],children:a.map(s=>e.jsx(o,{xs:24,sm:12,lg:8,children:e.jsxs(f,{className:"showtime-card",size:"small",hoverable:!0,children:[e.jsxs("div",{className:"showtime-header",children:[e.jsxs(u,{children:[e.jsx(A,{}),e.jsx(h,{strong:!0,className:"showtime",children:s.time})]}),e.jsx(j,{color:U(s.room?.type),icon:q(s.room?.type),children:s.room?.type||"Standard"})]}),e.jsx(ie,{style:{margin:"8px 0"}}),e.jsxs("div",{className:"showtime-details",children:[e.jsxs("div",{className:"cinema-info",children:[e.jsxs(h,{type:"secondary",children:[e.jsx(E,{})," ",s.cinema?.name]}),e.jsxs(h,{type:"secondary",style:{fontSize:"12px"},children:["Phòng: ",s.room?.name]})]}),e.jsx("div",{className:"price-section",children:e.jsx(h,{strong:!0,style:{color:"#ff6b35",fontSize:"14px"},children:F(s.price)})})]}),e.jsx(y,{type:"primary",block:!0,style:{marginTop:12},onClick:()=>L(s,t),children:"Đặt vé ngay"})]})},s.id))})]})})]})})},t.id))})}),e.jsx(re,{title:l?.title,open:!!l,onCancel:()=>S(null),footer:[e.jsx(y,{onClick:()=>S(null),children:"Đóng"},"close"),e.jsx(y,{type:"primary",onClick:()=>{S(null)},children:"Xem chi tiết"},"booking")],width:800,children:l&&e.jsxs(b,{gutter:[16,16],children:[e.jsx(o,{xs:24,md:8,children:e.jsx("img",{src:l.poster,alt:l.title,style:{width:"100%",borderRadius:"8px"}})}),e.jsx(o,{xs:24,md:16,children:e.jsxs(u,{direction:"vertical",size:"middle",children:[e.jsxs("div",{children:[e.jsx(p,{level:4,children:l.title}),e.jsxs(u,{children:[e.jsx(Rate,{disabled:!0,defaultValue:l.rating/2}),e.jsxs(h,{children:[l.rating,"/10"]})]})]}),e.jsxs(u,{wrap:!0,children:[e.jsx(j,{color:"blue",children:l.genre}),e.jsxs(j,{color:"orange",children:[l.duration," phút"]}),e.jsx(j,{color:"red",children:l.ageLabel})]}),e.jsx(h,{children:l.overview||"Đang cập nhật thông tin phim..."})]})})]})})]})})};export{ye as default};
