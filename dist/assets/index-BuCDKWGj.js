import{r as m,q as M,F as n,s as f,j as e,C as u,d as t,e as s,D as g,I as j,aO as y,T as U,aI as H,S as K,f as P,i as _,a1 as q}from"./index-bcuI966E.js";import{d as C}from"./dayjs.min-B6KFzVi6.js";import{T as i}from"./index-CJAnxsAG.js";import{S as x}from"./index-BCBFU0VU.js";import{S as b}from"./index-COd8B_t3.js";import{T as D}from"./index-D3FvcYjb.js";import{A as W}from"./index-C2piJUMZ.js";import{R as X}from"./ReloadOutlined-DXAFEWDy.js";import{R as J}from"./SaveOutlined-BDcRmz0R.js";import{R as Q}from"./DollarOutlined-CoSIG8gj.js";import"./DownOutlined-DeH2MZMn.js";import"./index-BexZ__8y.js";import"./ClockCircleOutlined-CELcQ7Uv.js";var Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M916 210H376c-17.7 0-32 14.3-32 32v236H108c-17.7 0-32 14.3-32 32v272c0 17.7 14.3 32 32 32h540c17.7 0 32-14.3 32-32V546h236c17.7 0 32-14.3 32-32V242c0-17.7-14.3-32-32-32zm-504 68h200v200H412V278zm-68 468H144V546h200v200zm268 0H412V546h200v200zm268-268H680V278h200v200z"}}]},name:"build",theme:"outlined"},ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 312H696v-16c0-101.6-82.4-184-184-184s-184 82.4-184 184v16H192c-17.7 0-32 14.3-32 32v536c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V344c0-17.7-14.3-32-32-32zm-432-16c0-61.9 50.1-112 112-112s112 50.1 112 112v16H400v-16zm392 544H232V384h96v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h224v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h96v456z"}}]},name:"shopping",theme:"outlined"};function I(){return I=Object.assign?Object.assign.bind():function(l){for(var r=1;r<arguments.length;r++){var d=arguments[r];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(l[o]=d[o])}return l},I.apply(this,arguments)}const ne=(l,r)=>m.createElement(M,I({},l,{ref:r,icon:Z})),se=m.forwardRef(ne);function S(){return S=Object.assign?Object.assign.bind():function(l){for(var r=1;r<arguments.length;r++){var d=arguments[r];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(l[o]=d[o])}return l},S.apply(this,arguments)}const ae=(l,r)=>m.createElement(M,S({},l,{ref:r,icon:ee})),ie=m.forwardRef(ae),{Option:h}=b,{TextArea:Y}=j,{Title:te,Text:le}=U,fe=()=>{const[l]=n.useForm(),[r,d]=m.useState(!1),[o,T]=m.useState(!1),[p,w]=m.useState({}),[N,O]=m.useState("pricing"),[v,k]=m.useState(!1);m.useEffect(()=>{R()},[]);const R=async()=>{try{d(!0);const c=await(await fetch("/data/settings.json")).json();w(c),l.setFieldsValue({...c,pricing:{...c.pricing,basePrice:c.pricing.basePrice,weekendSurcharge:c.pricing.weekendSurcharge,holidaySurcharge:c.pricing.holidaySurcharge},cinema:{...c.cinema,defaultOpenTime:c.cinema.defaultOpenTime?C(c.cinema.defaultOpenTime,"HH:mm"):null,defaultCloseTime:c.cinema.defaultCloseTime?C(c.cinema.defaultCloseTime,"HH:mm"):null}})}catch(a){f.error("Lỗi khi tải cài đặt hệ thống"),console.error("Error loading settings:",a)}finally{d(!1)}},B=async()=>{try{T(!0);const a=await l.validateFields(),c={...a,cinema:{...a.cinema,defaultOpenTime:a.cinema?.defaultOpenTime?.format("HH:mm"),defaultCloseTime:a.cinema?.defaultCloseTime?.format("HH:mm")},lastUpdated:new Date().toISOString(),updatedBy:"admin"};w(c),k(!1),f.success("Lưu cài đặt thành công"),console.log("Saved settings:",c)}catch(a){f.error("Có lỗi xảy ra khi lưu cài đặt"),console.error("Error saving settings:",a)}finally{T(!1)}},V=()=>{l.setFieldsValue(p),k(!1),f.info("Đã khôi phục về cài đặt ban đầu")},A=()=>{k(!0)},$=e.jsxs(u,{title:"Cài đặt giá vé",className:"settings-card",children:[e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["pricing","basePrice"],label:"Giá vé cơ bản",rules:[{required:!0,message:"Vui lòng nhập giá vé cơ bản"}],children:e.jsx(i,{min:0,style:{width:"100%"},formatter:a=>`${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:a=>a.replace(/\$\s?|(,*)/g,""),addonAfter:"đ"})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["pricing","weekendSurcharge"],label:"Phụ thu cuối tuần",children:e.jsx(i,{min:0,style:{width:"100%"},formatter:a=>`${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:a=>a.replace(/\$\s?|(,*)/g,""),addonAfter:"đ"})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["pricing","holidaySurcharge"],label:"Phụ thu ngày lễ",children:e.jsx(i,{min:0,style:{width:"100%"},formatter:a=>`${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:a=>a.replace(/\$\s?|(,*)/g,""),addonAfter:"đ"})})})]}),e.jsx(g,{children:"Phụ thu theo loại ghế"}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:6,children:e.jsx(n.Item,{name:["pricing","vipSurcharge"],label:"Ghế VIP",children:e.jsx(i,{min:0,style:{width:"100%"},addonAfter:"đ"})})}),e.jsx(s,{span:6,children:e.jsx(n.Item,{name:["pricing","premiumSurcharge"],label:"Ghế Premium",children:e.jsx(i,{min:0,style:{width:"100%"},addonAfter:"đ"})})}),e.jsx(s,{span:6,children:e.jsx(n.Item,{name:["pricing","coupleSurcharge"],label:"Ghế đôi",children:e.jsx(i,{min:0,style:{width:"100%"},addonAfter:"đ"})})})]}),e.jsx(g,{children:"Chiết khấu đặc biệt"}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["pricing","childDiscount"],label:"Giảm giá trẻ em",children:e.jsx(i,{min:0,max:100,style:{width:"100%"},addonAfter:"%"})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["pricing","studentDiscount"],label:"Giảm giá học sinh/sinh viên",children:e.jsx(i,{min:0,max:100,style:{width:"100%"},addonAfter:"%"})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["pricing","seniorDiscount"],label:"Giảm giá người cao tuổi",children:e.jsx(i,{min:0,max:100,style:{width:"100%"},addonAfter:"%"})})})]})]}),G=e.jsxs(u,{title:"Thông tin công ty",className:"settings-card",children:[e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:12,children:e.jsx(n.Item,{name:["company","name"],label:"Tên công ty",rules:[{required:!0,message:"Vui lòng nhập tên công ty"}],children:e.jsx(j,{})})}),e.jsx(s,{span:12,children:e.jsx(n.Item,{name:["company","slogan"],label:"Slogan",children:e.jsx(j,{})})})]}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["company","email"],label:"Email",rules:[{type:"email",message:"Email không hợp lệ"}],children:e.jsx(j,{})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["company","phone"],label:"Số điện thoại",children:e.jsx(j,{})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["company","website"],label:"Website",children:e.jsx(j,{})})})]}),e.jsx(n.Item,{name:["company","address"],label:"Địa chỉ",children:e.jsx(Y,{rows:3})}),e.jsx(g,{children:"Mạng xã hội"}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["company","facebook"],label:"Facebook",children:e.jsx(j,{})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["company","instagram"],label:"Instagram",children:e.jsx(j,{})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["company","youtube"],label:"YouTube",children:e.jsx(j,{})})})]})]}),L=e.jsxs(u,{title:"Cài đặt đặt vé",className:"settings-card",children:[e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["booking","maxSeatsPerBooking"],label:"Số ghế tối đa/lần đặt",children:e.jsx(i,{min:1,max:20,style:{width:"100%"}})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["booking","holdSeatDuration"],label:"Thời gian giữ chỗ (phút)",children:e.jsx(i,{min:5,max:60,style:{width:"100%"}})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["booking","advanceBookingDays"],label:"Đặt vé trước (ngày)",children:e.jsx(i,{min:1,max:90,style:{width:"100%"}})})})]}),e.jsx(g,{children:"Chính sách hủy vé"}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["booking","cancellationPolicy","enableCancellation"],valuePropName:"checked",children:e.jsx(x,{checkedChildren:"Cho phép hủy",unCheckedChildren:"Không cho phép"})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["booking","cancellationPolicy","cancellationDeadlineHours"],label:"Hạn hủy (giờ trước chiếu)",children:e.jsx(i,{min:1,max:24,style:{width:"100%"}})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["booking","cancellationPolicy","refundPercentage"],label:"% hoàn tiền",children:e.jsx(i,{min:0,max:100,style:{width:"100%"},addonAfter:"%"})})})]}),e.jsx(g,{children:"Phương thức thanh toán"}),e.jsx(n.Item,{name:["booking","payment","enabledMethods"],label:"Phương thức được kích hoạt",children:e.jsxs(y.Group,{children:[e.jsx(y,{value:"momo",children:"MoMo"}),e.jsx(y,{value:"vnpay",children:"VNPay"}),e.jsx(y,{value:"banking",children:"Chuyển khoản"}),e.jsx(y,{value:"cash",children:"Tiền mặt"})]})}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:12,children:e.jsx(n.Item,{name:["booking","payment","defaultMethod"],label:"Phương thức mặc định",children:e.jsxs(b,{children:[e.jsx(h,{value:"momo",children:"MoMo"}),e.jsx(h,{value:"vnpay",children:"VNPay"}),e.jsx(h,{value:"banking",children:"Chuyển khoản"}),e.jsx(h,{value:"cash",children:"Tiền mặt"})]})})}),e.jsx(s,{span:12,children:e.jsx(n.Item,{name:["booking","payment","autoRefundEnabled"],valuePropName:"checked",children:e.jsx(x,{checkedChildren:"Tự động hoàn tiền",unCheckedChildren:"Hoàn tiền thủ công"})})})]})]}),E=e.jsxs(u,{title:"Cài đặt hệ thống",className:"settings-card",children:[e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:12,children:e.jsxs(n.Item,{name:["system","maintenanceMode"],valuePropName:"checked",children:[e.jsx(x,{checkedChildren:"Bảo trì",unCheckedChildren:"Hoạt động",style:{marginRight:8}}),e.jsx("span",{children:"Chế độ bảo trì"})]})}),e.jsx(s,{span:12,children:e.jsxs(n.Item,{name:["system","enableRegistration"],valuePropName:"checked",children:[e.jsx(x,{checkedChildren:"Cho phép",unCheckedChildren:"Tắt",style:{marginRight:8}}),e.jsx("span",{children:"Đăng ký tài khoản mới"})]})})]}),e.jsx(n.Item,{name:["system","maintenanceMessage"],label:"Thông báo bảo trì",children:e.jsx(Y,{rows:3})}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsxs(n.Item,{name:["system","enableGuestBooking"],valuePropName:"checked",children:[e.jsx(x,{checkedChildren:"Cho phép",unCheckedChildren:"Không cho phép"}),e.jsx("span",{style:{marginLeft:8},children:"Đặt vé không cần đăng ký"})]})}),e.jsx(s,{span:8,children:e.jsxs(n.Item,{name:["system","enableReviews"],valuePropName:"checked",children:[e.jsx(x,{checkedChildren:"Bật",unCheckedChildren:"Tắt"}),e.jsx("span",{style:{marginLeft:8},children:"Đánh giá phim"})]})}),e.jsx(s,{span:8,children:e.jsxs(n.Item,{name:["system","enableRatings"],valuePropName:"checked",children:[e.jsx(x,{checkedChildren:"Bật",unCheckedChildren:"Tắt"}),e.jsx("span",{style:{marginLeft:8},children:"Xếp hạng phim"})]})})]}),e.jsx(g,{children:"Cài đặt định dạng"}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["system","timezone"],label:"Múi giờ",children:e.jsxs(b,{children:[e.jsx(h,{value:"Asia/Ho_Chi_Minh",children:"Việt Nam (UTC+7)"}),e.jsx(h,{value:"Asia/Bangkok",children:"Bangkok (UTC+7)"}),e.jsx(h,{value:"Asia/Singapore",children:"Singapore (UTC+8)"})]})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["system","dateFormat"],label:"Định dạng ngày",children:e.jsxs(b,{children:[e.jsx(h,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx(h,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx(h,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["system","currency"],label:"Tiền tệ",children:e.jsxs(b,{children:[e.jsx(h,{value:"VND",children:"VND (Việt Nam Đồng)"}),e.jsx(h,{value:"USD",children:"USD (US Dollar)"})]})})})]})]}),F=e.jsxs(u,{title:"Cài đặt rạp chiếu",className:"settings-card",children:[e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:12,children:e.jsx(n.Item,{name:["cinema","defaultOpenTime"],label:"Giờ mở cửa mặc định",children:e.jsx(D,{format:"HH:mm",style:{width:"100%"}})})}),e.jsx(s,{span:12,children:e.jsx(n.Item,{name:["cinema","defaultCloseTime"],label:"Giờ đóng cửa mặc định",children:e.jsx(D,{format:"HH:mm",style:{width:"100%"}})})})]}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["cinema","cleaningTimeBetweenShows"],label:"Thời gian dọn dẹp (phút)",children:e.jsx(i,{min:15,max:60,style:{width:"100%"}})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:["cinema","maxShowsPerDay"],label:"Số suất chiếu tối đa/ngày",children:e.jsx(i,{min:4,max:20,style:{width:"100%"}})})})]}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:12,children:e.jsxs(n.Item,{name:["cinema","enableOnlineSeating"],valuePropName:"checked",children:[e.jsx(x,{checkedChildren:"Bật",unCheckedChildren:"Tắt"}),e.jsx("span",{style:{marginLeft:8},children:"Chọn chỗ ngồi online"})]})}),e.jsx(s,{span:12,children:e.jsxs(n.Item,{name:["cinema","enableFoodOrdering"],valuePropName:"checked",children:[e.jsx(x,{checkedChildren:"Bật",unCheckedChildren:"Tắt"}),e.jsx("span",{style:{marginLeft:8},children:"Đặt đồ ăn online"})]})})]})]}),z=[{key:"pricing",label:e.jsxs("span",{children:[e.jsx(Q,{}),"Giá vé"]}),children:$},{key:"company",label:e.jsxs("span",{children:[e.jsx(se,{}),"Công ty"]}),children:G},{key:"booking",label:e.jsxs("span",{children:[e.jsx(ie,{}),"Đặt vé"]}),children:L},{key:"system",label:e.jsxs("span",{children:[e.jsx(H,{}),"Hệ thống"]}),children:E},{key:"cinema",label:e.jsxs("span",{children:[e.jsx(q,{}),"Rạp chiếu"]}),children:F}];return e.jsxs("div",{className:"settings-page",children:[e.jsxs("div",{className:"settings-header",children:[e.jsxs(te,{level:2,children:[e.jsx(H,{})," Cài đặt hệ thống"]}),e.jsxs(K,{children:[v&&e.jsx(W,{message:"Có thay đổi chưa lưu",type:"warning",showIcon:!0,style:{marginRight:16}}),e.jsx(P,{icon:e.jsx(X,{}),onClick:V,disabled:!v,children:"Khôi phục"}),e.jsx(P,{type:"primary",icon:e.jsx(J,{}),loading:o,onClick:B,disabled:!v,children:"Lưu cài đặt"})]})]}),e.jsx(n,{form:l,layout:"vertical",onValuesChange:A,children:e.jsx(_,{activeKey:N,onChange:O,items:z,type:"card",className:"settings-tabs"})}),e.jsx("div",{className:"settings-footer",children:e.jsxs(le,{type:"secondary",children:["Cập nhật lần cuối: ",p.lastUpdated?C(p.lastUpdated).format("DD/MM/YYYY HH:mm"):"Chưa có",p.updatedBy&&` bởi ${p.updatedBy}`]})})]})};export{fe as default};
