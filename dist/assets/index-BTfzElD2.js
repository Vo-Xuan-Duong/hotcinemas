import{r as c,F as l,j as e,T as ue,C as f,g as T,aH as xe,aI as pe,S as H,f as o,cS as ve,i as ge,d as z,e as d,A as F,E as je,M as q,I as g,p as j,x as D,y as ye,s as h}from"./index-bcuI966E.js";import{R as K}from"./CheckCircleOutlined-Cm1v39Q0.js";import{R as be}from"./CrownOutlined-BJUwjmND.js";import{R as _e}from"./PlusOutlined-WAyayBFJ.js";import{F as ke,T as Ce}from"./Table-BovAFv33.js";import{L as A}from"./index-B6-RBrWM.js";import{R as E}from"./EditOutlined-ntD1OIry.js";import{P as O}from"./index-BqnuXQlz.js";import{R as P}from"./DeleteOutlined-CNMFFws8.js";import{S as R}from"./index-COd8B_t3.js";import{S as X}from"./index-BCBFU0VU.js";import{D as y}from"./index-C9OcwkKB.js";import{R as Ne}from"./ExclamationCircleOutlined-CNDywDqf.js";import"./addEventListener-CwuRzLNG.js";import"./DownOutlined-DeH2MZMn.js";import"./Pagination-KlOrN12m.js";const Se="_blue_sznvc_86",Ie="_green_sznvc_95",Te="_purple_sznvc_104",ze="_orange_sznvc_113",n={"staff-container":"_staff-container_sznvc_1","staff-header":"_staff-header_sznvc_7","staff-title":"_staff-title_sznvc_11","staff-subtitle":"_staff-subtitle_sznvc_18","quick-stats":"_quick-stats_sznvc_24","stat-card":"_stat-card_sznvc_35","stat-icon":"_stat-icon_sznvc_77",blue:Se,green:Ie,purple:Te,orange:ze,"staff-table":"_staff-table_sznvc_122","staff-card":"_staff-card_sznvc_130","staff-tabs":"_staff-tabs_sznvc_139","staff-modal":"_staff-modal_sznvc_156","staff-form":"_staff-form_sznvc_182","staff-button":"_staff-button_sznvc_207","staff-button-secondary":"_staff-button-secondary_sznvc_226","staff-switch":"_staff-switch_sznvc_267","staff-avatar":"_staff-avatar_sznvc_276","staff-descriptions":"_staff-descriptions_sznvc_310","staff-tree":"_staff-tree_sznvc_323"},{Title:L,Text:Q}=ue,{Option:p}=R,Pe=()=>{const[U,b]=c.useState(!1),[J,_]=c.useState(!1),[W,k]=c.useState(!1),[V,M]=c.useState(!1),[$,C]=c.useState(!1),[i,N]=c.useState(null),[G,S]=c.useState(null),[v,w]=c.useState([{id:1,name:"Quản trị viên",key:"admin",description:"Quản lý toàn bộ hệ thống",permissions:["system","users","config"],createdAt:"2024-01-01"},{id:2,name:"Quản lý",key:"manager",description:"Quản lý rạp và lịch chiếu",permissions:["cinema","schedule","staff"],createdAt:"2024-01-01"},{id:3,name:"Nhân viên",key:"staff",description:"Nhân viên bán vé và kiểm soát",permissions:["sales","control"],createdAt:"2024-01-01"}]),[r,I]=c.useState([{id:1,name:"Nguyễn Văn An",email:"nguyenvanan@hotcinemas.vn",role:"admin",status:"active",department:"management",lastLogin:"2024-01-25 17:30:00",avatar:"NA"},{id:2,name:"Trần Thị Bình",email:"tranthibinh@hotcinemas.vn",role:"manager",status:"active",department:"operations",lastLogin:"2024-01-24 22:20:00",avatar:"TB"},{id:3,name:"Lê Hoàng Cường",email:"lehoangcuong@hotcinemas.vn",role:"staff",status:"inactive",department:"sales",lastLogin:"2024-01-20 16:15:00",avatar:"LC"}]),[u]=l.useForm(),[x]=l.useForm(),Y=r.length,Z=r.filter(t=>t.status==="active").length,ee=new Set(r.map(t=>t.role)).size,te=(t,s)=>{const a=r.map(m=>m.id===s.id?{...m,status:t?"active":"inactive"}:m);I(a),h.success(`Đã ${t?"kích hoạt":"vô hiệu hóa"} nhân viên ${s.name}`)},B=t=>{N(t),M(!0),u.setFieldsValue({name:t.name,email:t.email,role:t.role,department:t.department,status:t.status==="active"}),b(!0)},ne=t=>{const s=r.filter(a=>a.id!==t.id);I(s),h.success(`Đã xóa nhân viên ${t.name}`)},se=()=>{C(!1),S(null),k(!0),x.resetFields()},ae=t=>{S(t),C(!0),x.setFieldsValue({name:t.name,key:t.key,description:t.description,permissions:t.permissions}),k(!0)},ie=t=>{const s=r.filter(m=>m.role===t.key);if(s.length>0){h.error(`Không thể xóa vai trò "${t.name}" vì có ${s.length} nhân viên đang sử dụng`);return}const a=v.filter(m=>m.id!==t.id);w(a),h.success(`Đã xóa vai trò "${t.name}"`)},le=()=>{x.validateFields().then(t=>{if($){const s=v.map(a=>a.id===G.id?{...a,name:t.name,key:t.key,description:t.description,permissions:t.permissions||[]}:a);w(s),h.success(`Đã cập nhật vai trò "${t.name}"`)}else{const s={id:Math.max(...v.map(a=>a.id))+1,name:t.name,key:t.key,description:t.description,permissions:t.permissions||[],createdAt:new Date().toISOString().split("T")[0]};w([...v,s]),h.success(`Đã tạo vai trò "${t.name}"`)}k(!1),C(!1),S(null),x.resetFields()})},re=()=>{k(!1),C(!1),S(null),x.resetFields()},ce=()=>{M(!1),N(null),u.resetFields(),b(!0)},oe=t=>{N(t),_(!0)},de=()=>{u.validateFields().then(t=>{if(V){const s=r.map(a=>a.id===i.id?{...a,name:t.name,email:t.email,role:t.role,department:t.department,status:t.status?"active":"inactive"}:a);I(s),h.success("Đã cập nhật thông tin nhân viên")}else{const s={id:Math.max(...r.map(a=>a.id))+1,name:t.name,email:t.email,role:t.role,department:t.department,status:t.status?"active":"inactive",lastLogin:"Chưa đăng nhập",avatar:t.name.split(" ").map(a=>a[0]).join("").toUpperCase()};I([...r,s]),h.success("Đã thêm nhân viên mới")}b(!1),u.resetFields()})},he=()=>{b(!1),M(!1),N(null),u.resetFields()},me=[{title:"Nhân viên",dataIndex:"name",key:"name",render:(t,s)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx(F,{className:n["staff-avatar"],size:40,children:s.avatar}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,color:"#262626"},children:t}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"12px"},children:s.email}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"12px"},children:s.role==="admin"?"Quản lý hệ thống":s.role==="manager"?"Quản lý rạp":s.role==="staff"?"Nhân viên bán vé":"Nhân viên"})]})]})},{title:"Vai trò",dataIndex:"role",key:"role",render:t=>{const a={admin:{color:"red",text:"Quản trị viên"},manager:{color:"orange",text:"Quản lý"},staff:{color:"blue",text:"Nhân viên"}}[t]||{color:"default",text:t};return e.jsx(j,{color:a.color,children:a.text})}},{title:"Trạng thái",dataIndex:"status",key:"status",render:(t,s)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:t==="active"?"#52c41a":"#ff4d4f"},children:t==="active"?e.jsx(K,{}):e.jsx(Ne,{})}),e.jsx("span",{style:{color:t==="active"?"#52c41a":"#ff4d4f"},children:t==="active"?"Hoạt động":"Không hoạt động"}),e.jsx(X,{checked:t==="active",className:n["staff-switch"],onChange:a=>te(a,s)})]})},{title:"Phòng ban",dataIndex:"department",key:"department",render:t=>{const a={management:{color:"blue",text:"Quản lý"},operations:{color:"blue",text:"Vận hành"},sales:{color:"blue",text:"Bán hàng"}}[t]||{color:"default",text:t};return e.jsx(j,{color:a.color,children:a.text})}},{title:"Đăng nhập cuối",dataIndex:"lastLogin",key:"lastLogin",render:t=>e.jsx("div",{style:{fontSize:"12px",color:"#8c8c8c"},children:t})},{title:"Thao tác",key:"actions",render:(t,s)=>e.jsxs(H,{children:[e.jsx(D,{title:"Xem chi tiết",children:e.jsx(o,{type:"text",icon:e.jsx(ye,{}),size:"small",onClick:()=>oe(s)})}),e.jsx(D,{title:"Chỉnh sửa",children:e.jsx(o,{type:"text",icon:e.jsx(E,{}),size:"small",onClick:()=>B(s)})}),e.jsx(O,{title:"Bạn có chắc muốn xóa nhân viên này?",description:"Hành động này không thể hoàn tác.",onConfirm:()=>ne(s),okText:"Xóa",cancelText:"Hủy",children:e.jsx(D,{title:"Xóa",children:e.jsx(o,{type:"text",icon:e.jsx(P,{}),size:"small",danger:!0})})})]})}],fe=[{title:"Quản trị viên",key:"admin",children:[{title:"Quản lý hệ thống",key:"admin-system"},{title:"Quản lý người dùng",key:"admin-users"},{title:"Quản lý cấu hình",key:"admin-config"}]},{title:"Quản lý",key:"manager",children:[{title:"Quản lý rạp",key:"manager-cinema"},{title:"Quản lý lịch chiếu",key:"manager-schedule"},{title:"Quản lý nhân viên",key:"manager-staff"}]},{title:"Nhân viên",key:"staff",children:[{title:"Bán vé",key:"staff-sales"},{title:"Kiểm soát",key:"staff-control"},{title:"Dọn dẹp",key:"staff-clean"}]}];return e.jsxs("div",{className:n["staff-container"],children:[e.jsxs("div",{className:n["staff-header"],children:[e.jsx(L,{level:2,className:n["staff-title"],children:"Quản lý nhân viên"}),e.jsx(Q,{className:n["staff-subtitle"],children:"Quản lý nhân viên, vai trò và quyền hạn trong hệ thống"})]}),e.jsxs("div",{className:n["quick-stats"],children:[e.jsx("div",{children:e.jsx(f,{className:n["stat-card"]+" "+n.blue,children:e.jsx(T,{title:"Tổng nhân viên",value:Y,prefix:e.jsx(xe,{className:n["stat-icon"]})})})}),e.jsx("div",{children:e.jsx(f,{className:n["stat-card"]+" "+n.green,children:e.jsx(T,{title:"Đang hoạt động",value:Z,prefix:e.jsx(K,{className:n["stat-icon"]})})})}),e.jsx("div",{children:e.jsx(f,{className:n["stat-card"]+" "+n.purple,children:e.jsx(T,{title:"Vai trò",value:ee,prefix:e.jsx(be,{className:n["stat-icon"]})})})}),e.jsx("div",{children:e.jsx(f,{className:n["stat-card"]+" "+n.orange,children:e.jsx(T,{title:"Lịch sử hoạt động",value:r.length,prefix:e.jsx(pe,{className:n["stat-icon"]})})})})]}),e.jsxs(f,{className:n["staff-card"],children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx(L,{level:4,style:{margin:0},children:"Danh sách nhân viên"}),e.jsxs(H,{children:[e.jsx(o,{icon:e.jsx(ve,{}),onClick:se,className:n["staff-button-secondary"],children:"+ Tạo Vai trò"}),e.jsx(o,{type:"primary",icon:e.jsx(_e,{}),onClick:ce,className:n["staff-button"],children:"+ Thêm Nhân viên"})]})]}),e.jsx(ge,{defaultActiveKey:"staff",className:n["staff-tabs"],items:[{key:"staff",label:"Nhân viên",children:e.jsx(ke,{columns:me,dataSource:r,rowKey:"id",className:n["staff-table"],pagination:{total:r.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,s)=>`${s[0]}-${s[1]} của ${t} nhân viên`}})},{key:"roles",label:"Vai trò",children:e.jsx("div",{children:e.jsxs(z,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(f,{title:"Cây phân quyền",className:n["staff-card"],children:e.jsx(Ce,{treeData:fe,className:n["staff-tree"],defaultExpandAll:!0})})}),e.jsx(d,{span:12,children:e.jsx(f,{title:"Danh sách vai trò",className:n["staff-card"],children:e.jsx(A,{dataSource:v,renderItem:t=>e.jsx(A.Item,{actions:[e.jsx(o,{type:"text",icon:e.jsx(E,{}),size:"small",onClick:()=>ae(t),children:"Sửa"}),e.jsx(O,{title:`Bạn có chắc muốn xóa vai trò "${t.name}"?`,description:"Hành động này không thể hoàn tác.",onConfirm:()=>ie(t),okText:"Xóa",cancelText:"Hủy",children:e.jsx(o,{type:"text",icon:e.jsx(P,{}),size:"small",danger:!0,children:"Xóa"})})],children:e.jsx(A.Item.Meta,{avatar:e.jsx(F,{style:{backgroundColor:"#e50914"},children:t.name[0]}),title:t.name,description:e.jsxs("div",{children:[e.jsx("div",{children:t.description}),e.jsx("div",{style:{marginTop:4},children:e.jsxs(Q,{type:"secondary",children:["Mã: ",t.key]})}),e.jsx("div",{style:{marginTop:4},children:e.jsxs(Q,{type:"secondary",children:["Quyền: ",t.permissions.join(", ")]})})]})})})})})})]})})},{key:"activity",label:"Lịch sử hoạt động",children:e.jsx("div",{style:{textAlign:"center",padding:"40px"},children:e.jsx(je,{description:"Chưa có lịch sử hoạt động"})})}]})]}),e.jsx(q,{title:V?"Chỉnh sửa nhân viên":"Thêm nhân viên mới",open:U,onOk:de,onCancel:he,width:600,className:n["staff-modal"],okText:V?"Cập nhật":"Thêm",cancelText:"Hủy",children:e.jsxs(l,{form:u,layout:"vertical",className:n["staff-form"],children:[e.jsxs(z,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(l.Item,{name:"name",label:"Họ và tên",rules:[{required:!0,message:"Vui lòng nhập họ tên!"}],children:e.jsx(g,{placeholder:"Nhập họ và tên"})})}),e.jsx(d,{span:12,children:e.jsx(l.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Vui lòng nhập email!"},{type:"email",message:"Email không hợp lệ!"}],children:e.jsx(g,{placeholder:"Nhập email"})})})]}),e.jsxs(z,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(l.Item,{name:"role",label:"Vai trò",rules:[{required:!0,message:"Vui lòng chọn vai trò!"}],children:e.jsxs(R,{placeholder:"Chọn vai trò",children:[e.jsx(p,{value:"admin",children:"Quản trị viên"}),e.jsx(p,{value:"manager",children:"Quản lý"}),e.jsx(p,{value:"staff",children:"Nhân viên"})]})})}),e.jsx(d,{span:12,children:e.jsx(l.Item,{name:"department",label:"Phòng ban",rules:[{required:!0,message:"Vui lòng chọn phòng ban!"}],children:e.jsxs(R,{placeholder:"Chọn phòng ban",children:[e.jsx(p,{value:"management",children:"Quản lý"}),e.jsx(p,{value:"operations",children:"Vận hành"}),e.jsx(p,{value:"sales",children:"Bán hàng"})]})})})]}),e.jsx(l.Item,{name:"status",label:"Trạng thái",valuePropName:"checked",children:e.jsx(X,{checkedChildren:"Hoạt động",unCheckedChildren:"Không hoạt động"})})]})}),e.jsx(q,{title:"Chi tiết nhân viên",open:J,onCancel:()=>_(!1),footer:[e.jsx(o,{onClick:()=>_(!1),children:"Đóng"},"close"),e.jsx(o,{type:"primary",icon:e.jsx(E,{}),onClick:()=>{_(!1),B(i)},children:"Chỉnh sửa"},"edit")],width:600,className:n["staff-modal"],children:i&&e.jsxs("div",{className:n["staff-descriptions"],children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[e.jsx(F,{className:n["staff-avatar"],size:80,children:i.avatar}),e.jsx(L,{level:3,style:{marginTop:16},children:i.name}),e.jsx(Q,{type:"secondary",children:i.email})]}),e.jsxs(y,{column:1,bordered:!0,children:[e.jsx(y.Item,{label:"Vai trò",children:e.jsx(j,{color:i.role==="admin"?"red":i.role==="manager"?"orange":"blue",children:i.role==="admin"?"Quản trị viên":i.role==="manager"?"Quản lý":"Nhân viên"})}),e.jsx(y.Item,{label:"Phòng ban",children:e.jsx(j,{color:"blue",children:i.department==="management"?"Quản lý":i.department==="operations"?"Vận hành":"Bán hàng"})}),e.jsx(y.Item,{label:"Trạng thái",children:e.jsx(j,{color:i.status==="active"?"green":"red",children:i.status==="active"?"Hoạt động":"Không hoạt động"})}),e.jsx(y.Item,{label:"Đăng nhập cuối",children:i.lastLogin})]})]})}),e.jsx(q,{title:$?"Chỉnh sửa vai trò":"Tạo vai trò mới",open:W,onOk:le,onCancel:re,width:600,className:n["staff-modal"],okText:$?"Cập nhật":"Tạo",cancelText:"Hủy",children:e.jsxs(l,{form:x,layout:"vertical",className:n["staff-form"],children:[e.jsxs(z,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(l.Item,{name:"name",label:"Tên vai trò",rules:[{required:!0,message:"Vui lòng nhập tên vai trò!"}],children:e.jsx(g,{placeholder:"Nhập tên vai trò"})})}),e.jsx(d,{span:12,children:e.jsx(l.Item,{name:"key",label:"Mã vai trò",rules:[{required:!0,message:"Vui lòng nhập mã vai trò!"}],children:e.jsx(g,{placeholder:"Nhập mã vai trò (VD: admin, manager)"})})})]}),e.jsx(l.Item,{name:"description",label:"Mô tả",rules:[{required:!0,message:"Vui lòng nhập mô tả!"}],children:e.jsx(g.TextArea,{placeholder:"Mô tả chức năng và quyền hạn của vai trò",rows:3})}),e.jsx(l.Item,{name:"permissions",label:"Quyền hạn",children:e.jsx(R,{mode:"multiple",placeholder:"Chọn các quyền hạn",options:[{label:"Quản lý hệ thống",value:"system"},{label:"Quản lý người dùng",value:"users"},{label:"Quản lý cấu hình",value:"config"},{label:"Quản lý rạp",value:"cinema"},{label:"Quản lý lịch chiếu",value:"schedule"},{label:"Quản lý nhân viên",value:"staff"},{label:"Bán vé",value:"sales"},{label:"Kiểm soát",value:"control"},{label:"Xem báo cáo",value:"reports"},{label:"Quản lý khuyến mãi",value:"promotions"}]})})]})})]})};export{Pe as default};
