import{a as U,r as d,F as a,j as e,T as X,f as o,d as m,e as i,C as u,g as v,a3 as C,I as n,M as w,S as I,x as T,y as K,p as W,s as S}from"./index-bcuI966E.js";import{c as J}from"./cinemas-BvADCmeD.js";import{R as Q}from"./PlusOutlined-WAyayBFJ.js";import{S as x}from"./index-COd8B_t3.js";import{F as G}from"./Table-BovAFv33.js";import{I as O}from"./index-Cj-YuFRM.js";import{R as Y}from"./EditOutlined-ntD1OIry.js";import{P as _}from"./index-BqnuXQlz.js";import{R as Z}from"./DeleteOutlined-CNMFFws8.js";import"./DownOutlined-DeH2MZMn.js";import"./addEventListener-CwuRzLNG.js";import"./Pagination-KlOrN12m.js";const{Title:ee,Text:se}=X,{Option:c}=x,ge=()=>{const N=U(),[h,A]=d.useState(J),[F,te]=d.useState(!1),[R,p]=d.useState(!1),[M,g]=d.useState(!1),[V,j]=d.useState(null),[r]=a.useForm(),[b,E]=d.useState(""),[y,q]=d.useState("all"),f={total:h.length,active:h.filter(s=>s.status==="active").length,totalRooms:h.reduce((s,t)=>s+(t.rooms?.length||0),0),totalSeats:h.reduce((s,t)=>s+(t.rooms?.reduce((l,P)=>l+(P.capacity||0),0)||0),0)},k=h.filter(s=>{const t=s.name?.toLowerCase().includes(b.toLowerCase())||s.address?.toLowerCase().includes(b.toLowerCase()),l=y==="all"||s.status===y;return t&&l}),$=s=>{const t={id:Math.max(...h.map(l=>l.id||0))+1,...s,rooms:[],status:s.status||"active",facilities:s.facilities||[]};A([...h,t]),p(!1),r.resetFields(),S.success("Thêm rạp chiếu phim thành công!")},L=s=>{const t=h.map(l=>l.id===V.id?{...l,...s}:l);A(t),g(!1),j(null),r.resetFields(),S.success("Cập nhật rạp chiếu phim thành công!")},z=s=>{const t=h.filter(l=>l.id!==s);A(t),S.success("Xóa rạp chiếu phim thành công!")},B=()=>{p(!0),r.resetFields()},D=s=>{j(s),g(!0),r.setFieldsValue({...s,facilities:s.facilities||[]})},H=[{title:"Hình ảnh",dataIndex:"image",key:"image",width:100,render:(s,t)=>e.jsx(O,{src:s,alt:t.name,width:60,height:40,style:{objectFit:"cover",borderRadius:4},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=="})},{title:"Tên rạp",dataIndex:"name",key:"name",render:(s,t)=>e.jsx("span",{onClick:()=>N(`/admin/cinemas/detail/${t.id}`),style:{color:"#1890ff",cursor:"pointer",fontWeight:500,textDecoration:"underline"},children:s})},{title:"Địa chỉ",dataIndex:"address",key:"address",ellipsis:!0},{title:"Điện thoại",dataIndex:"phone",key:"phone",width:120},{title:"Email",dataIndex:"email",key:"email",ellipsis:!0},{title:"Phòng chiếu",dataIndex:"rooms",key:"rooms",width:100,align:"center",render:s=>s?.length||0},{title:"Trạng thái",dataIndex:"status",key:"status",width:120,render:s=>{const t={active:{color:"green",text:"Hoạt động"},inactive:{color:"red",text:"Không hoạt động"},maintenance:{color:"orange",text:"Bảo trì"}},l=t[s]||t.active;return e.jsx(W,{color:l.color,children:l.text})}},{title:"Thao tác",key:"action",width:150,render:(s,t)=>e.jsxs(I,{size:"small",children:[e.jsx(T,{title:"Xem chi tiết",children:e.jsx(o,{type:"text",icon:e.jsx(K,{}),onClick:()=>N(`/admin/cinemas/detail/${t.id}`),size:"small"})}),e.jsx(T,{title:"Chỉnh sửa",children:e.jsx(o,{type:"text",icon:e.jsx(Y,{}),onClick:()=>D(t),size:"small"})}),e.jsx(T,{title:"Xóa",children:e.jsx(_,{title:"Xóa rạp chiếu phim",description:"Bạn có chắc chắn muốn xóa rạp này?",onConfirm:()=>z(t.id),okText:"Có",cancelText:"Không",children:e.jsx(o,{type:"text",danger:!0,icon:e.jsx(Z,{}),size:"small"})})})]})}];return e.jsxs("div",{className:"cinemas-container",children:[e.jsxs("div",{className:"cinemas-header",children:[e.jsxs("div",{children:[e.jsx(ee,{level:2,className:"cinemas-title",children:"Quản lý Rạp Chiếu Phim"}),e.jsx(se,{className:"cinemas-subtitle",children:"Quản lý thông tin các rạp chiếu phim trong hệ thống"})]}),e.jsx(o,{type:"primary",icon:e.jsx(Q,{}),onClick:B,size:"large",children:"Thêm rạp mới"})]}),e.jsxs(m,{gutter:[16,16],className:"quick-stats",children:[e.jsx(i,{xs:24,sm:12,md:6,children:e.jsx(u,{className:"stat-card",children:e.jsx(v,{title:"Tổng số rạp",value:f.total,prefix:e.jsx(C,{className:"stat-icon",style:{color:"#1890ff"}}),valueStyle:{color:"#1890ff"}})})}),e.jsx(i,{xs:24,sm:12,md:6,children:e.jsx(u,{className:"stat-card",children:e.jsx(v,{title:"Rạp hoạt động",value:f.active,prefix:e.jsx(C,{className:"stat-icon",style:{color:"#52c41a"}}),valueStyle:{color:"#52c41a"}})})}),e.jsx(i,{xs:24,sm:12,md:6,children:e.jsx(u,{className:"stat-card",children:e.jsx(v,{title:"Tổng phòng chiếu",value:f.totalRooms,prefix:e.jsx(C,{className:"stat-icon",style:{color:"#faad14"}}),valueStyle:{color:"#faad14"}})})}),e.jsx(i,{xs:24,sm:12,md:6,children:e.jsx(u,{className:"stat-card",children:e.jsx(v,{title:"Tổng ghế ngồi",value:f.totalSeats,prefix:e.jsx(C,{className:"stat-icon",style:{color:"#722ed1"}}),valueStyle:{color:"#722ed1"}})})})]}),e.jsx(u,{className:"search-filter-section",children:e.jsxs(m,{gutter:[16,16],children:[e.jsx(i,{xs:24,md:12,children:e.jsx(n.Search,{placeholder:"Tìm kiếm theo tên rạp, địa chỉ...",value:b,onChange:s=>E(s.target.value),allowClear:!0,size:"large"})}),e.jsx(i,{xs:24,md:12,children:e.jsxs(x,{placeholder:"Lọc theo trạng thái",value:y,onChange:q,style:{width:"100%"},size:"large",children:[e.jsx(c,{value:"all",children:"Tất cả trạng thái"}),e.jsx(c,{value:"active",children:"Hoạt động"}),e.jsx(c,{value:"inactive",children:"Không hoạt động"}),e.jsx(c,{value:"maintenance",children:"Bảo trì"})]})})]})}),e.jsx(u,{children:e.jsx(G,{columns:H,dataSource:k,rowKey:"id",loading:F,pagination:{total:k.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(s,t)=>`${t[0]}-${t[1]} của ${s} rạp chiếu phim`},scroll:{x:1200}})}),e.jsx(w,{title:"Thêm rạp chiếu phim mới",open:R,onCancel:()=>{p(!1),r.resetFields()},footer:null,width:800,className:"cinema-modal",children:e.jsxs(a,{form:r,layout:"vertical",onFinish:$,children:[e.jsxs(m,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"name",label:"Tên rạp",rules:[{required:!0,message:"Vui lòng nhập tên rạp!"}],children:e.jsx(n,{placeholder:"Nhập tên rạp"})})}),e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"status",label:"Trạng thái",rules:[{required:!0,message:"Vui lòng chọn trạng thái!"}],initialValue:"active",children:e.jsxs(x,{children:[e.jsx(c,{value:"active",children:"Hoạt động"}),e.jsx(c,{value:"inactive",children:"Không hoạt động"}),e.jsx(c,{value:"maintenance",children:"Bảo trì"})]})})})]}),e.jsx(a.Item,{name:"address",label:"Địa chỉ",rules:[{required:!0,message:"Vui lòng nhập địa chỉ!"}],children:e.jsx(n.TextArea,{rows:2,placeholder:"Nhập địa chỉ chi tiết"})}),e.jsxs(m,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"phone",label:"Số điện thoại",rules:[{required:!0,message:"Vui lòng nhập số điện thoại!"},{pattern:/^[0-9]{10,11}$/,message:"Số điện thoại không hợp lệ!"}],children:e.jsx(n,{placeholder:"Nhập số điện thoại"})})}),e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Vui lòng nhập email!"},{type:"email",message:"Email không hợp lệ!"}],children:e.jsx(n,{placeholder:"Nhập email"})})})]}),e.jsx(a.Item,{name:"description",label:"Mô tả",children:e.jsx(n.TextArea,{rows:3,placeholder:"Nhập mô tả về rạp"})}),e.jsx(a.Item,{name:"image",label:"Hình ảnh URL",children:e.jsx(n,{placeholder:"Nhập URL hình ảnh"})}),e.jsx(a.Item,{name:"facilities",label:"Tiện ích",children:e.jsx(x,{mode:"tags",placeholder:"Nhập hoặc chọn tiện ích",options:[{label:"Parking",value:"Parking"},{label:"Food Court",value:"Food Court"},{label:"AC",value:"AC"},{label:"WiFi",value:"WiFi"},{label:"ATM",value:"ATM"},{label:"3D",value:"3D"},{label:"IMAX",value:"IMAX"}]})}),e.jsx(a.Item,{children:e.jsxs(I,{children:[e.jsx(o,{type:"primary",htmlType:"submit",children:"Thêm rạp"}),e.jsx(o,{onClick:()=>{p(!1),r.resetFields()},children:"Hủy"})]})})]})}),e.jsx(w,{title:"Chỉnh sửa rạp chiếu phim",open:M,onCancel:()=>{g(!1),j(null),r.resetFields()},footer:null,width:800,className:"cinema-modal",children:e.jsxs(a,{form:r,layout:"vertical",onFinish:L,children:[e.jsxs(m,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"name",label:"Tên rạp",rules:[{required:!0,message:"Vui lòng nhập tên rạp!"}],children:e.jsx(n,{placeholder:"Nhập tên rạp"})})}),e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"status",label:"Trạng thái",rules:[{required:!0,message:"Vui lòng chọn trạng thái!"}],children:e.jsxs(x,{children:[e.jsx(c,{value:"active",children:"Hoạt động"}),e.jsx(c,{value:"inactive",children:"Không hoạt động"}),e.jsx(c,{value:"maintenance",children:"Bảo trì"})]})})})]}),e.jsx(a.Item,{name:"address",label:"Địa chỉ",rules:[{required:!0,message:"Vui lòng nhập địa chỉ!"}],children:e.jsx(n.TextArea,{rows:2,placeholder:"Nhập địa chỉ chi tiết"})}),e.jsxs(m,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"phone",label:"Số điện thoại",rules:[{required:!0,message:"Vui lòng nhập số điện thoại!"},{pattern:/^[0-9]{10,11}$/,message:"Số điện thoại không hợp lệ!"}],children:e.jsx(n,{placeholder:"Nhập số điện thoại"})})}),e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Vui lòng nhập email!"},{type:"email",message:"Email không hợp lệ!"}],children:e.jsx(n,{placeholder:"Nhập email"})})})]}),e.jsx(a.Item,{name:"description",label:"Mô tả",children:e.jsx(n.TextArea,{rows:3,placeholder:"Nhập mô tả về rạp"})}),e.jsx(a.Item,{name:"image",label:"Hình ảnh URL",children:e.jsx(n,{placeholder:"Nhập URL hình ảnh"})}),e.jsx(a.Item,{name:"facilities",label:"Tiện ích",children:e.jsx(x,{mode:"tags",placeholder:"Nhập hoặc chọn tiện ích",options:[{label:"Parking",value:"Parking"},{label:"Food Court",value:"Food Court"},{label:"AC",value:"AC"},{label:"WiFi",value:"WiFi"},{label:"ATM",value:"ATM"},{label:"3D",value:"3D"},{label:"IMAX",value:"IMAX"}]})}),e.jsx(a.Item,{children:e.jsxs(I,{children:[e.jsx(o,{type:"primary",htmlType:"submit",children:"Cập nhật"}),e.jsx(o,{onClick:()=>{g(!1),j(null),r.resetFields()},children:"Hủy"})]})})]})})]})};export{ge as default};
