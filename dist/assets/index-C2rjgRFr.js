import{a as K,F as t,r as h,Q as z,s as d,j as e,C as v,T as O,f as a,I as s,M as Q,S as A,p as H,y as S}from"./index-bcuI966E.js";import{R as q}from"./PlusOutlined-WAyayBFJ.js";import{R as G}from"./SearchOutlined-D2gRiFxI.js";import{F as X}from"./Table-BovAFv33.js";import{T as j}from"./index-CJAnxsAG.js";import{S as o}from"./index-COd8B_t3.js";import{I as V}from"./index-Cj-YuFRM.js";import{R as Y}from"./index-Ciy63vs3.js";import{R as U}from"./EditOutlined-ntD1OIry.js";import{P as W}from"./index-BqnuXQlz.js";import{R as Z}from"./DeleteOutlined-CNMFFws8.js";import"./addEventListener-CwuRzLNG.js";import"./DownOutlined-DeH2MZMn.js";import"./Pagination-KlOrN12m.js";const{Title:$,Text:f}=O,{TextArea:b}=s,{Option:r}=o,me=()=>{const w=K(),[n]=t.useForm(),[c,m]=h.useState([]),[B,y]=h.useState(!0),[L,x]=h.useState(!1),[F,g]=h.useState(!1),[I,u]=h.useState(null),[C,T]=h.useState("");h.useEffect(()=>{D()},[]);const D=async()=>{try{y(!0),m(z)}catch(l){console.error("Error loading movies:",l),d.error("Lỗi khi tải danh sách phim")}finally{y(!1)}},R=()=>{n.resetFields(),x(!0)},k=l=>{u(l),n.setFieldsValue({title:l.title,genre:l.genre,releaseDate:l.releaseDate,poster:l.poster,backgroundImage:l.backgroundImage,description:l.description,duration:l.duration,rating:l.rating,ageLabel:l.ageLabel,format:l.format,trailer:l.trailer,director:l.director,productionStudio:l.productionStudio}),g(!0)},M=async l=>{try{m(c.filter(i=>i.id!==l)),d.success("Xóa phim thành công!"),console.log("Deleted movie with ID:",l)}catch(i){console.error("Error deleting movie:",i),d.error("Lỗi khi xóa phim")}},P=async l=>{try{if(F){const i={...I,...l};m(c.map(p=>p.id===I.id?i:p)),d.success("Cập nhật phim thành công!"),g(!1),console.log("Updated movie:",i)}else{const i={id:Date.now(),...l,cast:[]};m([...c,i]),d.success("Thêm phim mới thành công!"),x(!1),console.log("Added new movie:",i)}n.resetFields(),u(null)}catch(i){console.error("Error saving movie:",i),d.error("Lỗi khi lưu phim")}},E=l=>{w(`/admin/movies/${l.id}`)},N=c.filter(l=>l.title?.toLowerCase().includes(C.toLowerCase())||l.genre?.toLowerCase().includes(C.toLowerCase())),J=[{title:"Poster",dataIndex:"poster",key:"poster",width:100,render:(l,i)=>e.jsx(V,{src:l,alt:i.title,width:60,height:80,style:{borderRadius:"4px",objectFit:"cover"},fallback:"data:image/png;base64,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"})},{title:"Tên Phim",dataIndex:"title",key:"title",render:(l,i)=>e.jsx(a,{type:"link",onClick:()=>E(i),style:{padding:0,height:"auto",textAlign:"left"},children:e.jsx(f,{strong:!0,style:{color:"#1890ff"},children:l})})},{title:"Thể Loại",dataIndex:"genre",key:"genre",render:l=>e.jsxs("div",{children:[l?.split(", ").slice(0,3).map((i,p)=>e.jsx(H,{color:"blue",style:{marginBottom:"4px"},children:i},p)),l?.split(", ").length>3&&e.jsx(f,{type:"secondary",children:"..."})]})},{title:"Ngày Phát Hành",dataIndex:"releaseDate",key:"releaseDate"},{title:"Thời Lượng",dataIndex:"duration",key:"duration",render:l=>`${l} phút`},{title:"Đánh Giá",dataIndex:"rating",key:"rating",render:l=>e.jsxs(A,{children:[e.jsx(Y,{disabled:!0,value:l/2,allowHalf:!0,style:{fontSize:"14px"}}),e.jsxs(f,{children:[l,"/10"]})]})},{title:"Thao Tác",key:"actions",render:(l,i)=>e.jsxs(A,{children:[e.jsx(a,{icon:e.jsx(S,{}),size:"small",onClick:()=>E(i),children:"Xem"}),e.jsx(a,{icon:e.jsx(U,{}),size:"small",onClick:()=>k(i),children:"Sửa"}),e.jsx(W,{title:"Xóa phim",description:"Bạn có chắc chắn muốn xóa phim này?",onConfirm:()=>M(i.id),okText:"Có",cancelText:"Không",children:e.jsx(a,{icon:e.jsx(Z,{}),size:"small",danger:!0,children:"Xóa"})})]})}];return e.jsxs("div",{className:"movies-container",children:[e.jsxs(v,{className:"movies-header",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx($,{level:2,style:{margin:0},children:"Quản lý Phim"}),e.jsx(a,{type:"primary",icon:e.jsx(q,{}),size:"large",onClick:R,children:"Thêm Phim Mới"})]}),e.jsx(s,{placeholder:"Tìm kiếm phim theo tên hoặc thể loại...",prefix:e.jsx(G,{}),value:C,onChange:l=>T(l.target.value),style:{maxWidth:"400px"}})]}),e.jsx(v,{children:e.jsx(X,{columns:J,dataSource:N,rowKey:"id",loading:B,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(l,i)=>`${i[0]}-${i[1]} của ${l} phim`},scroll:{x:1e3}})}),e.jsx(Q,{title:"Thêm Phim Mới",open:L,onCancel:()=>{x(!1),n.resetFields()},footer:null,width:800,destroyOnClose:!0,children:e.jsxs(t,{form:n,layout:"vertical",onFinish:P,initialValues:{format:"2D",ageLabel:"P"},children:[e.jsx(t.Item,{label:"Tên Phim",name:"title",rules:[{required:!0,message:"Vui lòng nhập tên phim"}],children:e.jsx(s,{})}),e.jsx(t.Item,{label:"Thể Loại",name:"genre",rules:[{required:!0,message:"Vui lòng nhập thể loại"}],children:e.jsx(s,{placeholder:"Ví dụ: Hành động, Phiêu lưu, Khoa học viễn tưởng"})}),e.jsxs(A.Compact,{style:{display:"flex",width:"100%"},children:[e.jsx(t.Item,{label:"Ngày Phát Hành",name:"releaseDate",rules:[{required:!0,message:"Vui lòng nhập ngày phát hành"}],style:{flex:1,marginRight:"8px"},children:e.jsx(s,{placeholder:"dd.mm.yyyy"})}),e.jsx(t.Item,{label:"Thời Lượng (phút)",name:"duration",rules:[{required:!0,message:"Vui lòng nhập thời lượng"}],style:{flex:1,marginLeft:"8px"},children:e.jsx(j,{min:1,style:{width:"100%"}})})]}),e.jsxs(A.Compact,{style:{display:"flex",width:"100%"},children:[e.jsx(t.Item,{label:"Đánh Giá",name:"rating",rules:[{required:!0,message:"Vui lòng nhập đánh giá"}],style:{flex:1,marginRight:"8px"},children:e.jsx(j,{min:0,max:10,step:.1,style:{width:"100%"}})}),e.jsx(t.Item,{label:"Độ Tuổi",name:"ageLabel",style:{flex:1,marginLeft:"8px"},children:e.jsxs(o,{children:[e.jsx(r,{value:"P",children:"P - Phim dành cho mọi lứa tuổi"}),e.jsx(r,{value:"K",children:"K - Phim dành cho trẻ em dưới 13 tuổi"}),e.jsx(r,{value:"T13",children:"T13 - Phim cấm trẻ em dưới 13 tuổi"}),e.jsx(r,{value:"T16",children:"T16 - Phim cấm trẻ em dưới 16 tuổi"}),e.jsx(r,{value:"T18",children:"T18 - Phim cấm trẻ em dưới 18 tuổi"}),e.jsx(r,{value:"C",children:"C - Phim cấm chiếu"})]})})]}),e.jsx(t.Item,{label:"Định Dạng",name:"format",children:e.jsxs(o,{children:[e.jsx(r,{value:"2D",children:"2D"}),e.jsx(r,{value:"3D",children:"3D"}),e.jsx(r,{value:"IMAX",children:"IMAX"}),e.jsx(r,{value:"4DX",children:"4DX"})]})}),e.jsx(t.Item,{label:"Poster URL",name:"poster",children:e.jsx(s,{placeholder:"Nhập URL hình ảnh poster"})}),e.jsx(t.Item,{label:"Background Image URL",name:"backgroundImage",children:e.jsx(s,{placeholder:"Nhập URL hình nền"})}),e.jsx(t.Item,{label:"Trailer URL",name:"trailer",children:e.jsx(s,{placeholder:"Nhập URL trailer"})}),e.jsx(t.Item,{label:"Đạo Diễn",name:"director",children:e.jsx(s,{})}),e.jsx(t.Item,{label:"Hãng Sản Xuất",name:"productionStudio",children:e.jsx(s,{})}),e.jsx(t.Item,{label:"Mô Tả",name:"description",children:e.jsx(b,{rows:4,placeholder:"Nhập mô tả phim"})}),e.jsx(t.Item,{style:{textAlign:"right"},children:e.jsxs(A,{children:[e.jsx(a,{onClick:()=>{x(!1),n.resetFields()},children:"Hủy"}),e.jsx(a,{type:"primary",htmlType:"submit",children:"Thêm Phim"})]})})]})}),e.jsx(Q,{title:"Chỉnh Sửa Phim",open:F,onCancel:()=>{g(!1),n.resetFields(),u(null)},footer:null,width:800,destroyOnClose:!0,children:e.jsxs(t,{form:n,layout:"vertical",onFinish:P,children:[e.jsx(t.Item,{label:"Tên Phim",name:"title",rules:[{required:!0,message:"Vui lòng nhập tên phim"}],children:e.jsx(s,{})}),e.jsx(t.Item,{label:"Thể Loại",name:"genre",rules:[{required:!0,message:"Vui lòng nhập thể loại"}],children:e.jsx(s,{placeholder:"Ví dụ: Hành động, Phiêu lưu, Khoa học viễn tưởng"})}),e.jsxs(A.Compact,{style:{display:"flex",width:"100%"},children:[e.jsx(t.Item,{label:"Ngày Phát Hành",name:"releaseDate",rules:[{required:!0,message:"Vui lòng nhập ngày phát hành"}],style:{flex:1,marginRight:"8px"},children:e.jsx(s,{placeholder:"dd.mm.yyyy"})}),e.jsx(t.Item,{label:"Thời Lượng (phút)",name:"duration",rules:[{required:!0,message:"Vui lòng nhập thời lượng"}],style:{flex:1,marginLeft:"8px"},children:e.jsx(j,{min:1,style:{width:"100%"}})})]}),e.jsxs(A.Compact,{style:{display:"flex",width:"100%"},children:[e.jsx(t.Item,{label:"Đánh Giá",name:"rating",rules:[{required:!0,message:"Vui lòng nhập đánh giá"}],style:{flex:1,marginRight:"8px"},children:e.jsx(j,{min:0,max:10,step:.1,style:{width:"100%"}})}),e.jsx(t.Item,{label:"Độ Tuổi",name:"ageLabel",style:{flex:1,marginLeft:"8px"},children:e.jsxs(o,{children:[e.jsx(r,{value:"P",children:"P - Phim dành cho mọi lứa tuổi"}),e.jsx(r,{value:"K",children:"K - Phim dành cho trẻ em dưới 13 tuổi"}),e.jsx(r,{value:"T13",children:"T13 - Phim cấm trẻ em dưới 13 tuổi"}),e.jsx(r,{value:"T16",children:"T16 - Phim cấm trẻ em dưới 16 tuổi"}),e.jsx(r,{value:"T18",children:"T18 - Phim cấm trẻ em dưới 18 tuổi"}),e.jsx(r,{value:"C",children:"C - Phim cấm chiếu"})]})})]}),e.jsx(t.Item,{label:"Định Dạng",name:"format",children:e.jsxs(o,{children:[e.jsx(r,{value:"2D",children:"2D"}),e.jsx(r,{value:"3D",children:"3D"}),e.jsx(r,{value:"IMAX",children:"IMAX"}),e.jsx(r,{value:"4DX",children:"4DX"})]})}),e.jsx(t.Item,{label:"Poster URL",name:"poster",children:e.jsx(s,{placeholder:"Nhập URL hình ảnh poster"})}),e.jsx(t.Item,{label:"Background Image URL",name:"backgroundImage",children:e.jsx(s,{placeholder:"Nhập URL hình nền"})}),e.jsx(t.Item,{label:"Trailer URL",name:"trailer",children:e.jsx(s,{placeholder:"Nhập URL trailer"})}),e.jsx(t.Item,{label:"Đạo Diễn",name:"director",children:e.jsx(s,{})}),e.jsx(t.Item,{label:"Hãng Sản Xuất",name:"productionStudio",children:e.jsx(s,{})}),e.jsx(t.Item,{label:"Mô Tả",name:"description",children:e.jsx(b,{rows:4,placeholder:"Nhập mô tả phim"})}),e.jsx(t.Item,{style:{textAlign:"right"},children:e.jsxs(A,{children:[e.jsx(a,{onClick:()=>{g(!1),n.resetFields(),u(null)},children:"Hủy"}),e.jsx(a,{type:"primary",htmlType:"submit",children:"Cập Nhật"})]})})]})})]})};export{me as default};
