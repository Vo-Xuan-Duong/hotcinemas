import{r as h,q as de,F as p,j as e,cZ as b,T as he,C,g as me,f as d,i as ue,d as T,e as x,P as pe,c_ as G,M as R,I as V,A as O,D as F,p as w,S as q,x as v,y as B,s as _,aI as xe}from"./index-bcuI966E.js";import{R as E}from"./CheckCircleOutlined-Cm1v39Q0.js";import{R as z}from"./DollarOutlined-CoSIG8gj.js";import{R as ye}from"./PlusOutlined-WAyayBFJ.js";import{F as H}from"./Table-BovAFv33.js";import{L as X}from"./index-B6-RBrWM.js";import{S as J}from"./index-COd8B_t3.js";import{S as Z}from"./index-BCBFU0VU.js";import{A as ge}from"./index-C2piJUMZ.js";import{D as i}from"./index-C9OcwkKB.js";import{R as Q}from"./EditOutlined-ntD1OIry.js";import{P as je}from"./index-BqnuXQlz.js";import{R as fe}from"./DeleteOutlined-CNMFFws8.js";import{R as ve}from"./ExclamationCircleOutlined-CNDywDqf.js";import{R as Ie}from"./ClockCircleOutlined-Cahcm4Ws.js";import"./addEventListener-CwuRzLNG.js";import"./DownOutlined-DeH2MZMn.js";import"./Pagination-KlOrN12m.js";import"./ClockCircleOutlined-CELcQ7Uv.js";var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zM402.9 528.8l-77.5 77.5a8.03 8.03 0 000 11.3l34 34c3.1 3.1 8.2 3.1 11.3 0l77.5-77.5c55.7 35.1 130.1 28.4 178.6-20.1 56.3-56.3 56.3-147.5 0-203.8-56.3-56.3-147.5-56.3-203.8 0-48.5 48.5-55.2 123-20.1 178.6zm65.4-133.3c31.3-31.3 82-31.3 113.2 0 31.3 31.3 31.3 82 0 113.2-31.3 31.3-82 31.3-113.2 0s-31.3-81.9 0-113.2z"}}]},name:"security-scan",theme:"outlined"};function A(){return A=Object.assign?Object.assign.bind():function(g){for(var l=1;l<arguments.length;l++){var c=arguments[l];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(g[m]=c[m])}return g},A.apply(this,arguments)}const be=(g,l)=>h.createElement(de,A({},g,{ref:l,icon:_e})),Ce=h.forwardRef(be),s={"payment-container":"_payment-container_1s0ii_1","payment-header":"_payment-header_1s0ii_7","payment-title":"_payment-title_1s0ii_11","payment-subtitle":"_payment-subtitle_1s0ii_18","quick-stats":"_quick-stats_1s0ii_24","stat-card":"_stat-card_1s0ii_32","payment-table":"_payment-table_1s0ii_101","payment-card":"_payment-card_1s0ii_109","payment-tabs":"_payment-tabs_1s0ii_118","payment-modal":"_payment-modal_1s0ii_135","payment-form":"_payment-form_1s0ii_161","payment-button":"_payment-button_1s0ii_186","payment-password":"_payment-password_1s0ii_268","payment-select":"_payment-select_1s0ii_290","gateway-icon":"_gateway-icon_1s0ii_313","transaction-timeline":"_transaction-timeline_1s0ii_330","test-connection":"_test-connection_1s0ii_355","amount-display":"_amount-display_1s0ii_379","fee-display":"_fee-display_1s0ii_385","net-amount":"_net-amount_1s0ii_391","payment-alert":"_payment-alert_1s0ii_405","payment-progress":"_payment-progress_1s0ii_475"},{Title:S,Text:I}=he,{Option:M}=J,{Password:Te}=V,Ee=()=>{const[g,l]=h.useState(!1),[c,m]=h.useState(!1),[W,N]=h.useState(!1),[a,j]=h.useState(null),[f]=p.useForm(),[y,k]=h.useState([{id:1,name:"VNPay",type:"vnpay",status:"active",merchantId:"VNPAY001",secretKey:"********",testMode:!0,transactionCount:1250,successRate:98.5,lastTransaction:"2024-01-25 15:30:00"},{id:2,name:"MoMo",type:"momo",status:"active",merchantId:"MOMO001",secretKey:"********",testMode:!1,transactionCount:890,successRate:97.2,lastTransaction:"2024-01-25 14:20:00"},{id:3,name:"ZaloPay",type:"zalopay",status:"inactive",merchantId:"ZALOPAY001",secretKey:"********",testMode:!0,transactionCount:450,successRate:95.8,lastTransaction:"2024-01-24 16:45:00"}]),[o,Y]=h.useState([{id:1,amount:15e4,gateway:"VNPay",status:"success",customer:"Nguyễn Văn A",orderId:"ORD001",transactionId:"TXN001",createdAt:"2024-01-25 15:30:00",fee:1500,netAmount:148500},{id:2,amount:25e4,gateway:"MoMo",status:"pending",customer:"Trần Thị B",orderId:"ORD002",transactionId:"TXN002",createdAt:"2024-01-25 14:20:00",fee:2500,netAmount:247500},{id:3,amount:18e4,gateway:"ZaloPay",status:"failed",customer:"Lê Văn C",orderId:"ORD003",transactionId:"TXN003",createdAt:"2024-01-25 13:15:00",fee:1800,netAmount:178200}]),[U,D]=h.useState(!1),[r,L]=h.useState(null),ee=[{title:"Tổng giao dịch",value:o.length,icon:e.jsx(b,{})},{title:"Thành công",value:o.filter(t=>t.status==="success").length,icon:e.jsx(E,{})},{title:"Tỷ lệ thành công",value:o.length>0?Math.round(o.filter(t=>t.status==="success").length/o.length*100)+"%":"0%",icon:e.jsx(Ce,{})},{title:"Doanh thu",value:o.reduce((t,n)=>t+n.netAmount,0).toLocaleString("vi-VN")+"đ",icon:e.jsx(z,{})}],te=()=>{m(!1),j(null),f.resetFields(),l(!0)},P=t=>{m(!0),j(t),f.setFieldsValue({...t,status:t.status==="active",testMode:t.testMode}),l(!0)},ne=t=>{j(t),N(!0)},se=t=>{k(y.filter(n=>n.id!==t)),_.success("Đã xóa cổng thanh toán!")},ae=()=>{f.validateFields().then(t=>{const n={...t,status:t.status?"active":"inactive",id:c&&a?a.id:Date.now(),transactionCount:c&&a?a.transactionCount:0,successRate:c&&a?a.successRate:100,lastTransaction:c&&a?a.lastTransaction:""};c&&a?(k(y.map(u=>u.id===a.id?n:u)),_.success("Cập nhật cổng thanh toán thành công!")):(k([n,...y]),_.success("Thêm cổng thanh toán thành công!")),l(!1),j(null),m(!1),f.resetFields()})},ie=()=>{l(!1),j(null),m(!1),f.resetFields()},$=()=>{N(!1),j(null)},ce=t=>{L(t),D(!0)},K=()=>{D(!1),L(null)},le=t=>{Y(o.map(n=>n.id===t.id?{...n,status:"refunded"}:n)),_.success("Hoàn tiền giao dịch thành công!")},oe=[{title:"Cổng thanh toán",dataIndex:"name",key:"name",render:(t,n)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx(O,{size:40,icon:e.jsx(b,{}),className:s["gateway-icon"],style:{backgroundColor:n.type==="vnpay"?"#1890ff":n.type==="momo"?"#eb2f96":"#52c41a"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,color:"#262626"},children:t}),e.jsxs("div",{style:{color:"#8c8c8c",fontSize:"12px"},children:["Merchant ID: ",n.merchantId]})]})]})},{title:"Trạng thái",dataIndex:"status",key:"status",render:t=>e.jsx(w,{color:t==="active"?"green":"red",children:t==="active"?"Hoạt động":"Không hoạt động"})},{title:"Chế độ",dataIndex:"testMode",key:"testMode",render:t=>e.jsx(w,{color:t?"orange":"green",children:t?"Test Mode":"Live Mode"})},{title:"Thống kê",key:"stats",render:(t,n)=>e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"12px",color:"#8c8c8c"},children:[n.transactionCount," giao dịch"]}),e.jsxs("div",{style:{fontSize:"12px",color:"#8c8c8c"},children:[n.successRate,"% thành công"]})]})},{title:"Giao dịch cuối",dataIndex:"lastTransaction",key:"lastTransaction",render:t=>e.jsx("div",{style:{fontSize:"12px",color:"#8c8c8c"},children:t})},{title:"Thao tác",key:"actions",render:(t,n)=>e.jsxs(q,{children:[e.jsx(v,{title:"Xem chi tiết",children:e.jsx(d,{type:"text",icon:e.jsx(B,{}),size:"small",onClick:()=>ne(n)})}),e.jsx(v,{title:"Chỉnh sửa",children:e.jsx(d,{type:"text",icon:e.jsx(Q,{}),size:"small",onClick:()=>P(n)})}),e.jsx(v,{title:"Test kết nối",children:e.jsx(d,{type:"text",icon:e.jsx(xe,{}),size:"small",className:s["test-connection"],onClick:()=>_.info("Kết nối thành công!")})}),e.jsx(je,{title:"Bạn có chắc muốn xóa cổng thanh toán này?",onConfirm:()=>se(n.id),children:e.jsx(v,{title:"Xóa",children:e.jsx(d,{type:"text",icon:e.jsx(fe,{}),size:"small",danger:!0})})})]})}],re=[{title:"Giao dịch",key:"transaction",render:(t,n)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,color:"#262626"},children:n.transactionId}),e.jsxs("div",{style:{color:"#8c8c8c",fontSize:"12px"},children:[n.customer," - ",n.orderId]})]})},{title:"Số tiền",key:"amount",render:(t,n)=>e.jsxs("div",{children:[e.jsxs("div",{className:s["amount-display"],children:[n.amount.toLocaleString("vi-VN"),"đ"]}),e.jsxs("div",{className:s["fee-display"],children:["Phí: ",n.fee.toLocaleString("vi-VN"),"đ"]}),e.jsxs("div",{className:s["net-amount"],children:["Thực nhận: ",n.netAmount.toLocaleString("vi-VN"),"đ"]})]})},{title:"Cổng thanh toán",dataIndex:"gateway",key:"gateway",render:t=>e.jsx(w,{color:"blue",icon:e.jsx(b,{}),children:t})},{title:"Trạng thái",dataIndex:"status",key:"status",render:t=>{const u={success:{color:"green",text:"Thành công",icon:e.jsx(E,{})},pending:{color:"orange",text:"Đang xử lý",icon:e.jsx(Ie,{})},failed:{color:"red",text:"Thất bại",icon:e.jsx(ve,{})},refunded:{color:"blue",text:"Đã hoàn tiền",icon:e.jsx(z,{})}}[t]||{color:"default",text:t};return e.jsx(w,{color:u.color,icon:u.icon,children:u.text})}},{title:"Thời gian",dataIndex:"createdAt",key:"createdAt",render:t=>e.jsx("div",{style:{fontSize:"12px",color:"#8c8c8c"},children:t})},{title:"Thao tác",key:"actions",render:(t,n)=>e.jsxs(q,{children:[e.jsx(v,{title:"Xem chi tiết",children:e.jsx(d,{type:"text",icon:e.jsx(B,{}),size:"small",onClick:()=>ce(n)})}),e.jsx(v,{title:"Hoàn tiền",children:e.jsx(d,{type:"text",icon:e.jsx(z,{}),size:"small",onClick:()=>le(n),disabled:n.status==="refunded"})})]})}];return e.jsxs("div",{className:s["payment-container"],children:[e.jsxs("div",{className:s["payment-header"],children:[e.jsx(S,{level:2,className:s["payment-title"],children:"Quản lý thanh toán"}),e.jsx(I,{className:s["payment-subtitle"],children:"Cấu hình và quản lý các cổng thanh toán"})]}),e.jsx("div",{className:s["quick-stats"],children:ee.map((t,n)=>e.jsx("div",{children:e.jsx(C,{className:s["stat-card"],children:e.jsx(me,{title:t.title,value:t.value,prefix:t.icon,valueStyle:{color:"#262626"}})})},n))}),e.jsxs(C,{className:s["payment-card"],children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx(S,{level:4,style:{margin:0},children:"Cấu hình thanh toán"}),e.jsx(d,{type:"primary",icon:e.jsx(ye,{}),onClick:te,className:s["payment-button"],children:"+ Thêm cổng thanh toán"})]}),e.jsx(ue,{defaultActiveKey:"gateways",className:s["payment-tabs"],items:[{key:"gateways",label:"Cổng thanh toán",children:e.jsx(H,{columns:oe,dataSource:y,rowKey:"id",className:s["payment-table"],pagination:{total:y.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,n)=>`${n[0]}-${n[1]} của ${t} cổng thanh toán`}})},{key:"transactions",label:"Giao dịch",children:e.jsx(H,{columns:re,dataSource:o,rowKey:"id",className:s["payment-table"],pagination:{total:o.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,n)=>`${n[0]}-${n[1]} của ${t} giao dịch`}})},{key:"analytics",label:"Phân tích",children:e.jsx("div",{children:e.jsxs(T,{gutter:16,children:[e.jsx(x,{span:12,children:e.jsx(C,{title:"Thống kê theo cổng thanh toán",className:s["payment-card"],children:e.jsx(X,{dataSource:y.map(t=>({gateway:t.name,count:t.transactionCount,percentage:Math.round(t.transactionCount/y.reduce((n,u)=>n+u.transactionCount,0)*100)})),renderItem:t=>e.jsx(X.Item,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[e.jsx(I,{children:t.gateway}),e.jsxs("div",{children:[e.jsx(I,{strong:!0,children:t.count}),e.jsx(pe,{percent:t.percentage,size:"small",className:s["payment-progress"],style:{marginTop:4}})]})]})})})})}),e.jsx(x,{span:12,children:e.jsx(C,{title:"Timeline giao dịch",className:s["payment-card"],children:e.jsx(G,{className:s["transaction-timeline"],children:o.map(t=>e.jsxs(G.Item,{color:t.status==="success"?"green":t.status==="pending"?"orange":t.status==="failed"?"red":"blue",children:[e.jsxs(I,{children:[t.status==="success"?"Giao dịch thành công":t.status==="pending"?"Giao dịch đang xử lý":t.status==="failed"?"Giao dịch thất bại":"Đã hoàn tiền"," - ",t.gateway]}),e.jsx("div",{style:{fontSize:"12px",color:"#8c8c8c"},children:t.createdAt})]},t.id))})})})]})})}]})]}),e.jsx(R,{title:c?"Chỉnh sửa cổng thanh toán":"Thêm cổng thanh toán mới",open:g,onOk:ae,onCancel:ie,width:600,className:s["payment-modal"],okText:c?"Cập nhật":"Thêm",cancelText:"Hủy",children:e.jsxs(p,{form:f,layout:"vertical",className:s["payment-form"],children:[e.jsxs(T,{gutter:16,children:[e.jsx(x,{span:12,children:e.jsx(p.Item,{name:"name",label:"Tên cổng thanh toán",rules:[{required:!0,message:"Vui lòng nhập tên!"}],children:e.jsx(V,{placeholder:"Nhập tên cổng thanh toán"})})}),e.jsx(x,{span:12,children:e.jsx(p.Item,{name:"type",label:"Loại cổng thanh toán",rules:[{required:!0,message:"Vui lòng chọn loại!"}],children:e.jsxs(J,{placeholder:"Chọn loại",className:s["payment-select"],children:[e.jsx(M,{value:"vnpay",children:"VNPay"}),e.jsx(M,{value:"momo",children:"MoMo"}),e.jsx(M,{value:"zalopay",children:"ZaloPay"}),e.jsx(M,{value:"banking",children:"Internet Banking"})]})})})]}),e.jsxs(T,{gutter:16,children:[e.jsx(x,{span:12,children:e.jsx(p.Item,{name:"merchantId",label:"Merchant ID",rules:[{required:!0,message:"Vui lòng nhập Merchant ID!"}],children:e.jsx(V,{placeholder:"Nhập Merchant ID"})})}),e.jsx(x,{span:12,children:e.jsx(p.Item,{name:"secretKey",label:"Secret Key",rules:[{required:!0,message:"Vui lòng nhập Secret Key!"}],children:e.jsx(Te,{placeholder:"Nhập Secret Key",className:s["payment-password"]})})})]}),e.jsxs(T,{gutter:16,children:[e.jsx(x,{span:12,children:e.jsx(p.Item,{name:"status",label:"Trạng thái",valuePropName:"checked",children:e.jsx(Z,{checkedChildren:"Hoạt động",unCheckedChildren:"Không hoạt động"})})}),e.jsx(x,{span:12,children:e.jsx(p.Item,{name:"testMode",label:"Chế độ test",valuePropName:"checked",children:e.jsx(Z,{checkedChildren:"Test Mode",unCheckedChildren:"Live Mode"})})})]}),e.jsx(ge,{message:"Lưu ý bảo mật",description:"Secret Key và các thông tin nhạy cảm sẽ được mã hóa và bảo vệ an toàn.",type:"info",showIcon:!0,className:s["payment-alert"]})]})}),e.jsx(R,{title:"Chi tiết cổng thanh toán",open:W,onCancel:$,width:500,footer:[e.jsx(d,{onClick:$,children:"Đóng"},"close"),e.jsx(d,{type:"primary",icon:e.jsx(Q,{}),onClick:()=>{N(!1),P(a)},children:"Chỉnh sửa"},"edit")],className:s["payment-modal"],children:a&&e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(O,{size:64,icon:e.jsx(b,{}),style:{backgroundColor:a.type==="vnpay"?"#1890ff":a.type==="momo"?"#eb2f96":"#52c41a",marginBottom:16}}),e.jsx(S,{level:4,children:a.name}),e.jsxs(I,{type:"secondary",children:["Merchant ID: ",a.merchantId]}),e.jsx(F,{}),e.jsxs(i,{column:1,bordered:!0,size:"small",children:[e.jsx(i.Item,{label:"Loại",children:a.type}),e.jsx(i.Item,{label:"Trạng thái",children:a.status==="active"?"Hoạt động":"Không hoạt động"}),e.jsx(i.Item,{label:"Chế độ",children:a.testMode?"Test Mode":"Live Mode"}),e.jsx(i.Item,{label:"Số giao dịch",children:a.transactionCount}),e.jsxs(i.Item,{label:"Tỷ lệ thành công",children:[a.successRate,"%"]}),e.jsx(i.Item,{label:"Giao dịch cuối",children:a.lastTransaction})]})]})}),e.jsx(R,{title:"Chi tiết giao dịch",open:U,onCancel:K,width:500,footer:[e.jsx(d,{onClick:K,children:"Đóng"},"close")],className:s["payment-modal"],children:r&&e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(S,{level:4,children:r.transactionId}),e.jsxs(I,{type:"secondary",children:["Khách hàng: ",r.customer]}),e.jsx(F,{}),e.jsxs(i,{column:1,bordered:!0,size:"small",children:[e.jsxs(i.Item,{label:"Số tiền",children:[r.amount.toLocaleString("vi-VN"),"đ"]}),e.jsx(i.Item,{label:"Cổng thanh toán",children:r.gateway}),e.jsx(i.Item,{label:"Trạng thái",children:r.status}),e.jsx(i.Item,{label:"Thời gian",children:r.createdAt}),e.jsxs(i.Item,{label:"Phí",children:[r.fee.toLocaleString("vi-VN"),"đ"]}),e.jsxs(i.Item,{label:"Thực nhận",children:[r.netAmount.toLocaleString("vi-VN"),"đ"]}),e.jsx(i.Item,{label:"Mã đơn hàng",children:r.orderId})]})]})})]})};export{Ee as default};
